# 应用配置
NODE_ENV=development
PORT=3000
API_PREFIX=api

# Supabase 配置
# 从 Supabase 控制台获取：Settings → API
SUPABASE_URL=https://your-project.supabase.co
SUPABASE_ANON_KEY=your-anon-key
SUPABASE_SERVICE_ROLE_KEY=your-service-role-key

# 数据库配置（Supabase PostgreSQL）
#
# IPv4 网络必须使用 Session Pooler！
# 从 Supabase 控制台获取：Settings → Database → Connection string
#
# 选项 1：使用 Supabase Session Pooler（IPv4 网络必需）
# Transaction mode (端口 6543) - 用于应用运行时
DATABASE_URL="postgresql://postgres.[ref]:[PASSWORD]@aws-x-region.pooler.supabase.com:6543/postgres?pgbouncer=true&connection_limit=1"

# Session mode (端口 5432) - 用于数据库迁移
DIRECT_URL="postgresql://postgres.[ref]:[PASSWORD]@aws-x-region.pooler.supabase.com:5432/postgres"

# 选项 2：本地 PostgreSQL（如果不使用 Supabase）
# DATABASE_URL="postgresql://postgres:postgres@localhost:5432/nestbase"
# DIRECT_URL="postgresql://postgres:postgres@localhost:5432/nestbase"

# ⚠️ 重要提示：
# 1. 密码中的特殊字符需要 URL 编码，例如：@ → %40
# 2. [ref] 替换为你的 Supabase 项目引用
# 3. [PASSWORD] 替换为你的数据库密码

# JWT 配置
# 生产环境请使用强随机密钥！可用命令生成：openssl rand -base64 32
JWT_SECRET=your-super-secret-jwt-key-change-this-in-production

# Access Token 有效期（短期，用于 API 访问）
# 格式：数字 + 单位（s=秒, m=分钟, h=小时, d=天）
# 推荐：15m-1h
JWT_ACCESS_EXPIRES_IN=15m

# Refresh Token 有效期（长期，用于刷新 Access Token）
# 格式：数字 + 单位（s=秒, m=分钟, h=小时, d=天）
# 推荐：7d-30d
JWT_REFRESH_EXPIRES_IN=7d

# 兼容旧配置（已弃用，请使用上面的 JWT_ACCESS_EXPIRES_IN）
JWT_EXPIRES_IN=7d

# Swagger 文档配置
SWAGGER_TITLE=NestBase API Documentation
SWAGGER_DESCRIPTION=基于 NestJS + Supabase + Prisma 的后端服务框架
SWAGGER_VERSION=1.0
SWAGGER_PATH=api-docs

# Redis 配置
REDIS_ENABLED=true
REDIS_HOST=127.0.0.1
REDIS_PORT=6379
REDIS_PASSWORD=
REDIS_DB=0
REDIS_KEY_PREFIX=nestbase:
PERMISSIONS_CACHE_TTL=300
MENU_ROUTES_CACHE_TTL=300
