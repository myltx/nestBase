import{_ as e,c as o,o as i,a0 as n}from"./chunks/framework.CHkYM5Ax.js";const u=JSON.parse('{"title":"迁移指南：集成 nestBase-admin 到 Monorepo","description":"","frontmatter":{},"headers":[],"relativePath":"project/development/MIGRATION_ADMIN_INTEGRATION.md","filePath":"project/development/MIGRATION_ADMIN_INTEGRATION.md","lastUpdated":1766991563000}'),s={name:"project/development/MIGRATION_ADMIN_INTEGRATION.md"};function t(l,a,d,r,c,p){return i(),o("div",null,[...a[0]||(a[0]=[n(`<h1 id="迁移指南-集成-nestbase-admin-到-monorepo" tabindex="-1">迁移指南：集成 nestBase-admin 到 Monorepo <a class="header-anchor" href="#迁移指南-集成-nestbase-admin-到-monorepo" aria-label="Permalink to &quot;迁移指南：集成 nestBase-admin 到 Monorepo&quot;">​</a></h1><h2 id="_1-目标" tabindex="-1">1. 目标 <a class="header-anchor" href="#_1-目标" aria-label="Permalink to &quot;1. 目标&quot;">​</a></h2><p>将独立的 <code>nestBase-admin</code> (Soybean Admin) 项目整合到 NestBase Monorepo 结构中，作为标准的前端应用 (<code>apps/frontend</code>)，并将其依赖的本地包提升到根工作区。</p><h2 id="_2-迁移步骤记录" tabindex="-1">2. 迁移步骤记录 <a class="header-anchor" href="#_2-迁移步骤记录" aria-label="Permalink to &quot;2. 迁移步骤记录&quot;">​</a></h2><h3 id="_2-1-准备工作" tabindex="-1">2.1 准备工作 <a class="header-anchor" href="#_2-1-准备工作" aria-label="Permalink to &quot;2.1 准备工作&quot;">​</a></h3><ul><li>创建新分支 <code>feature/infrastructure/frontend-integration</code> 以确保安全。</li></ul><h3 id="_2-2-包迁移-package-migration" tabindex="-1">2.2 包迁移 (Package Migration) <a class="header-anchor" href="#_2-2-包迁移-package-migration" aria-label="Permalink to &quot;2.2 包迁移 (Package Migration)&quot;">​</a></h3><ul><li><strong>源路径</strong>: <code>apps/nestBase-admin/packages/*</code></li><li><strong>目标路径</strong>: <code>packages/*</code></li><li><strong>操作</strong>: 将 Admin 项目下的 <code>packages</code> 目录内容移动到根目录的 <code>packages</code> 目录。这使得这些工具库（如 <code>@sa/axios</code>, <code>@sa/utils</code>）成为整个 Monorepo 的共享资源。</li></ul><h3 id="_2-3-应用迁移-app-migration" tabindex="-1">2.3 应用迁移 (App Migration) <a class="header-anchor" href="#_2-3-应用迁移-app-migration" aria-label="Permalink to &quot;2.3 应用迁移 (App Migration)&quot;">​</a></h3><ul><li><strong>操作</strong>: <ol><li>删除原有的空目录 <code>apps/frontend</code>。</li><li>将 <code>apps/nestBase-admin</code> 移动并重命名为 <code>apps/frontend</code>。</li></ol></li><li><strong>配置调整</strong>: <ul><li>修改 <code>apps/frontend/package.json</code> 中的 <code>name</code> 为 <code>@nestbase/frontend</code> (可选，或保持 <code>soybean-admin</code>)。</li><li>确保其依赖指向 workspace 协议（如 <code>&quot;@sa/utils&quot;: &quot;workspace:*&quot;</code>）。</li><li><strong>注意</strong>: 如果原 Admin 项目对 <code>node</code> 或 <code>pnpm</code> 版本要求过高（如 Node 20+），建议将其 <code>engines</code> 字段调整为 <code>&quot;&gt;=18.0.0&quot;</code> 以匹配 Monorepo 环境，或者升级开发环境。</li></ul></li></ul><h3 id="_2-4-工作区配置-workspace-config" tabindex="-1">2.4 工作区配置 (Workspace Config) <a class="header-anchor" href="#_2-4-工作区配置-workspace-config" aria-label="Permalink to &quot;2.4 工作区配置 (Workspace Config)&quot;">​</a></h3><ul><li>更新根目录 <code>pnpm-workspace.yaml</code>，确保包含：<div class="language-yaml vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">yaml</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">packages</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  - </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;apps/*&#39;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  - </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;packages/*&#39;</span></span></code></pre></div></li></ul><h3 id="_2-5-依赖安装与验证" tabindex="-1">2.5 依赖安装与验证 <a class="header-anchor" href="#_2-5-依赖安装与验证" aria-label="Permalink to &quot;2.5 依赖安装与验证&quot;">​</a></h3><ul><li>运行 <code>pnpm install</code> 重新链接依赖。</li><li>运行 <code>pnpm dev:frontend</code> 验证前端启动。</li></ul><h2 id="_3-注意事项" tabindex="-1">3. 注意事项 <a class="header-anchor" href="#_3-注意事项" aria-label="Permalink to &quot;3. 注意事项&quot;">​</a></h2><ul><li>本次迁移涉及大量文件移动，建议在移动前确保 git工作区干净。</li><li><code>pnpm-lock.yaml</code> 可能会发生较大变化，这是正常的。</li></ul>`,16)])])}const g=e(s,[["render",t]]);export{u as __pageData,g as default};
