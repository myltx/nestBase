import{_ as e,c as l,o as d,a0 as a}from"./chunks/framework.CHkYM5Ax.js";const x=JSON.parse('{"title":"系统配置详解 (Environment Variables)","description":"","frontmatter":{},"headers":[],"relativePath":"guides/SYSTEM_CONFIG.md","filePath":"guides/SYSTEM_CONFIG.md","lastUpdated":1767087281000}'),n={name:"guides/SYSTEM_CONFIG.md"};function s(o,t,i,r,g,c){return d(),l("div",null,[...t[0]||(t[0]=[a('<h1 id="系统配置详解-environment-variables" tabindex="-1">系统配置详解 (Environment Variables) <a class="header-anchor" href="#系统配置详解-environment-variables" aria-label="Permalink to &quot;系统配置详解 (Environment Variables)&quot;">​</a></h1><p>本文档详细列出了 NestBase 项目中所有可用的环境变量配置项。</p><h2 id="_1-后端配置-apps-backend-env" tabindex="-1">1. 后端配置 (<code>apps/backend/.env</code>) <a class="header-anchor" href="#_1-后端配置-apps-backend-env" aria-label="Permalink to &quot;1. 后端配置 (`apps/backend/.env`)&quot;">​</a></h2><table tabindex="0"><thead><tr><th style="text-align:left;">变量名</th><th style="text-align:left;">是否必填</th><th style="text-align:left;">默认值</th><th style="text-align:left;">说明</th></tr></thead><tbody><tr><td style="text-align:left;"><strong>基础配置</strong></td><td style="text-align:left;"></td><td style="text-align:left;"></td><td style="text-align:left;"></td></tr><tr><td style="text-align:left;"><code>PORT</code></td><td style="text-align:left;">否</td><td style="text-align:left;"><code>3000</code></td><td style="text-align:left;">服务监听端口</td></tr><tr><td style="text-align:left;"><code>NODE_ENV</code></td><td style="text-align:left;">否</td><td style="text-align:left;"><code>development</code></td><td style="text-align:left;">环境模式: development / production</td></tr><tr><td style="text-align:left;"><code>API_PREFIX</code></td><td style="text-align:left;">否</td><td style="text-align:left;"><code>api</code></td><td style="text-align:left;">全局路由前缀</td></tr><tr><td style="text-align:left;"><strong>数据库 (Prisma)</strong></td><td style="text-align:left;"></td><td style="text-align:left;"></td><td style="text-align:left;"></td></tr><tr><td style="text-align:left;"><code>DATABASE_URL</code></td><td style="text-align:left;"><strong>是</strong></td><td style="text-align:left;">-</td><td style="text-align:left;">PostgreSQL 连接字符串 (支持连接池)</td></tr><tr><td style="text-align:left;"><code>DIRECT_URL</code></td><td style="text-align:left;"><strong>是</strong></td><td style="text-align:left;">-</td><td style="text-align:left;">PostgreSQL 直连字符串 (用于迁移)</td></tr><tr><td style="text-align:left;"><strong>认证安全</strong></td><td style="text-align:left;"></td><td style="text-align:left;"></td><td style="text-align:left;"></td></tr><tr><td style="text-align:left;"><code>JWT_SECRET</code></td><td style="text-align:left;"><strong>是</strong></td><td style="text-align:left;">-</td><td style="text-align:left;">JWT 签名密钥，<strong>务必保密</strong></td></tr><tr><td style="text-align:left;"><code>JWT_EXPIRES_IN</code></td><td style="text-align:left;">否</td><td style="text-align:left;"><code>7d</code></td><td style="text-align:left;">Token 有效期</td></tr><tr><td style="text-align:left;"><code>REFRESH_TOKEN_EXPIRES_IN</code></td><td style="text-align:left;">否</td><td style="text-align:left;"><code>30d</code></td><td style="text-align:left;">刷新 Token 有效期</td></tr><tr><td style="text-align:left;"><strong>Redis (可选)</strong></td><td style="text-align:left;"></td><td style="text-align:left;"></td><td style="text-align:left;"></td></tr><tr><td style="text-align:left;"><code>REDIS_HOST</code></td><td style="text-align:left;">否</td><td style="text-align:left;"><code>localhost</code></td><td style="text-align:left;">Redis 地址</td></tr><tr><td style="text-align:left;"><code>REDIS_PORT</code></td><td style="text-align:left;">否</td><td style="text-align:left;"><code>6379</code></td><td style="text-align:left;">Redis 端口</td></tr><tr><td style="text-align:left;"><code>REDIS_PASSWORD</code></td><td style="text-align:left;">否</td><td style="text-align:left;">-</td><td style="text-align:left;">Redis 密码</td></tr><tr><td style="text-align:left;"><strong>Swagger</strong></td><td style="text-align:left;"></td><td style="text-align:left;"></td><td style="text-align:left;"></td></tr><tr><td style="text-align:left;"><code>SWAGGER_ENABLE</code></td><td style="text-align:left;">否</td><td style="text-align:left;"><code>true</code></td><td style="text-align:left;">是否启用 Swagger 文档</td></tr><tr><td style="text-align:left;"><code>SWAGGER_PATH</code></td><td style="text-align:left;">否</td><td style="text-align:left;"><code>api-docs</code></td><td style="text-align:left;">文档访问路径</td></tr></tbody></table><h2 id="_2-前端配置-apps-frontend-env" tabindex="-1">2. 前端配置 (<code>apps/frontend/.env</code>) <a class="header-anchor" href="#_2-前端配置-apps-frontend-env" aria-label="Permalink to &quot;2. 前端配置 (`apps/frontend/.env`)&quot;">​</a></h2><p>注意：前端环境变量必须以 <code>VITE_</code> 开头。</p><table tabindex="0"><thead><tr><th style="text-align:left;">变量名</th><th style="text-align:left;">说明</th><th style="text-align:left;">示例</th></tr></thead><tbody><tr><td style="text-align:left;"><strong>构建与服务</strong></td><td style="text-align:left;"></td><td style="text-align:left;"></td></tr><tr><td style="text-align:left;"><code>VITE_SERVICE_BASE_URL</code></td><td style="text-align:left;">后端 API 地址</td><td style="text-align:left;"><code>http://localhost:3000</code></td></tr><tr><td style="text-align:left;"><code>VITE_HTTP_PROXY</code></td><td style="text-align:left;">是否开启开发代理</td><td style="text-align:left;"><code>Y</code> 或 <code>N</code></td></tr><tr><td style="text-align:left;"><strong>路由</strong></td><td style="text-align:left;"></td><td style="text-align:left;"></td></tr><tr><td style="text-align:left;"><code>VITE_ROUTER_HISTORY_MODE</code></td><td style="text-align:left;">路由模式</td><td style="text-align:left;"><code>history</code> (推荐) 或 <code>hash</code></td></tr><tr><td style="text-align:left;"><code>VITE_ROUTE_HOME_PATH</code></td><td style="text-align:left;">登录后默认跳转页</td><td style="text-align:left;"><code>/home</code></td></tr><tr><td style="text-align:left;"><strong>功能开关</strong></td><td style="text-align:left;"></td><td style="text-align:left;"></td></tr><tr><td style="text-align:left;"><code>VITE_AUTH_ROUTE_MODE</code></td><td style="text-align:left;">路由权限模式</td><td style="text-align:left;"><code>dynamic</code> (后端动态) 或 <code>static</code> (前端静态)</td></tr><tr><td style="text-align:left;"><code>VITE_Visualizer</code></td><td style="text-align:left;">是否在构建时生成包分析</td><td style="text-align:left;"><code>Y</code> 或 <code>N</code></td></tr></tbody></table><h2 id="_3-特殊配置说明" tabindex="-1">3. 特殊配置说明 <a class="header-anchor" href="#_3-特殊配置说明" aria-label="Permalink to &quot;3. 特殊配置说明&quot;">​</a></h2><h3 id="_3-1-跨域配置-cors" tabindex="-1">3.1 跨域配置 (CORS) <a class="header-anchor" href="#_3-1-跨域配置-cors" aria-label="Permalink to &quot;3.1 跨域配置 (CORS)&quot;">​</a></h3><p>后端默认允许所有跨域 (<code>origin: *</code>)。在生产环境中，建议修改 <code>main.ts</code> 中的 <code>cors</code> 配置，或通过环境变量注入允许的域名列表。</p><h3 id="_3-2-数据库连接模式-supabase-特有" tabindex="-1">3.2 数据库连接模式 (Supabase 特有) <a class="header-anchor" href="#_3-2-数据库连接模式-supabase-特有" aria-label="Permalink to &quot;3.2 数据库连接模式 (Supabase 特有)&quot;">​</a></h3><p>如果你使用 Supabase，<code>schema.prisma</code> 分离了两个 URL：</p><ul><li><code>DATABASE_URL</code>: 用于应用运行时，应连接到 Transaction Pooler (端口 6543)。</li><li><code>DIRECT_URL</code>: 用于 <code>prisma migrate</code>，应直接连接到数据库 Session (端口 5432)。</li></ul><p>确保在 <code>.env</code> 中正确区分这两个地址。</p>',14)])])}const y=e(n,[["render",s]]);export{x as __pageData,y as default};
