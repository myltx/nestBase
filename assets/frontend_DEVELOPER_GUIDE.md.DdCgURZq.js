import{_ as i,c as a,o as n,a0 as e}from"./chunks/framework.CHkYM5Ax.js";const c=JSON.parse('{"title":"前端开发指南","description":"","frontmatter":{},"headers":[],"relativePath":"frontend/DEVELOPER_GUIDE.md","filePath":"frontend/DEVELOPER_GUIDE.md","lastUpdated":1767087281000}'),t={name:"frontend/DEVELOPER_GUIDE.md"};function l(h,s,p,k,r,d){return n(),a("div",null,[...s[0]||(s[0]=[e(`<h1 id="前端开发指南" tabindex="-1">前端开发指南 <a class="header-anchor" href="#前端开发指南" aria-label="Permalink to &quot;前端开发指南&quot;">​</a></h1><p>本文档面向前端开发人员，详细说明项目的核心配置、开发流程与最佳实践。</p><h2 id="_1-快速上手" tabindex="-1">1. 快速上手 <a class="header-anchor" href="#_1-快速上手" aria-label="Permalink to &quot;1. 快速上手&quot;">​</a></h2><h3 id="_1-1-环境配置-env" tabindex="-1">1.1 环境配置 (<code>.env</code>) <a class="header-anchor" href="#_1-1-环境配置-env" aria-label="Permalink to &quot;1.1 环境配置 (\`.env\`)&quot;">​</a></h3><p>项目根目录下提供了 <code>.env</code> 配置文件（或 <code>.env.development</code>）。关键变量如下：</p><div class="language-env vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">env</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span># API 服务地址 (本地代理目标)</span></span>
<span class="line"><span>VITE_SERVICE_BASE_URL=http://localhost:3000</span></span>
<span class="line"><span></span></span>
<span class="line"><span># 开启/关闭 HTTP 代理</span></span>
<span class="line"><span>VITE_HTTP_PROXY=Y</span></span>
<span class="line"><span></span></span>
<span class="line"><span># 路由模式 (hash | history)</span></span>
<span class="line"><span>VITE_ROUTER_HISTORY_MODE=history</span></span>
<span class="line"><span></span></span>
<span class="line"><span># 认证通过后的默认首页</span></span>
<span class="line"><span>VITE_ROUTE_HOME_PATH=/home</span></span></code></pre></div><h3 id="_1-2-启动流程" tabindex="-1">1.2 启动流程 <a class="header-anchor" href="#_1-2-启动流程" aria-label="Permalink to &quot;1.2 启动流程&quot;">​</a></h3><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">pnpm</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> install</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">pnpm</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> dev</span></span></code></pre></div><p>系统采用 <strong>聚合启动 (Bootstrap)</strong> 模式：</p><ol><li>初始化 Pinia Store。</li><li>加载本地缓存的主题配置。</li><li><strong>核心</strong>: 调用 <code>/api/auth/profile</code> 和 <code>/api/auth/permissions</code> 接口。 <ul><li>若 Token 有效：拉取用户信息与权限 -&gt; 动态生成路由 -&gt; 渲染应用。</li><li>若无效：重定向至登录页。</li></ul></li></ol><hr><h2 id="_2-接口请求配置" tabindex="-1">2. 接口请求配置 <a class="header-anchor" href="#_2-接口请求配置" aria-label="Permalink to &quot;2. 接口请求配置&quot;">​</a></h2><p>HTTP 请求模块基于 Axios 封装，位于 <code>src/service/request</code>。</p><h3 id="_2-1-定义-api接口" tabindex="-1">2.1 定义 API接口 <a class="header-anchor" href="#_2-1-定义-api接口" aria-label="Permalink to &quot;2.1 定义 API接口&quot;">​</a></h3><p>在 <code>src/service/api</code> 目录下按模块定义接口。例如 <code>content.ts</code>:</p><div class="language-typescript vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">typescript</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> { request } </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">from</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &#39;@/service/request&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">/** 获取文章列表 */</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">export</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> function</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> fetchGetArticleList</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">params</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">?:</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> Api</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">SystemManage</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">ArticleSearchParams</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">  return</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> request</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&lt;</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">Api</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">SystemManage</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">ArticleList</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;({</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    url: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;/contents&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    method: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;get&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    params,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  });</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span></code></pre></div><h3 id="_2-2-类型定义" tabindex="-1">2.2 类型定义 <a class="header-anchor" href="#_2-2-类型定义" aria-label="Permalink to &quot;2.2 类型定义&quot;">​</a></h3><p>建议在 <code>src/typings/api.d.ts</code> 或模块内部定义 TypeScript 类型，以获得良好的代码提示。</p><div class="language-typescript vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">typescript</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">declare</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> namespace</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> Api</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">  namespace</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> SystemManage</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    interface</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> Article</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">      id</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">:</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> string</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">      title</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">:</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> string</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">      // ...</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span></code></pre></div><hr><h2 id="_3-路由与菜单配置" tabindex="-1">3. 路由与菜单配置 <a class="header-anchor" href="#_3-路由与菜单配置" aria-label="Permalink to &quot;3. 路由与菜单配置&quot;">​</a></h2><p>项目使用 <a href="https://github.com/soybeanjs/elegant-router" target="_blank" rel="noreferrer">Elegant Router</a> 自动生成路由声明，但也支持手动配置。</p><h3 id="_3-1-新增页面" tabindex="-1">3.1 新增页面 <a class="header-anchor" href="#_3-1-新增页面" aria-label="Permalink to &quot;3.1 新增页面&quot;">​</a></h3><ol><li>在 <code>src/views</code> 下创建页面组件，例如 <code>src/views/manage/order/index.vue</code>。</li><li>在路由配置中（或通过后端动态路由）指向该组件。</li></ol><h3 id="_3-2-动态路由-后端控制" tabindex="-1">3.2 动态路由 (后端控制) <a class="header-anchor" href="#_3-2-动态路由-后端控制" aria-label="Permalink to &quot;3.2 动态路由 (后端控制)&quot;">​</a></h3><p>目前系统开启了后端动态路由模式。菜单数据由 <code>/api/menus/user-routes</code> 接口返回。</p><ul><li><strong>前端组件映射</strong>: 后端返回的 <code>component</code> 字段（如 <code>view.manage_user</code>）会自动映射到 <code>src/views/manage/user/index.vue</code>。</li><li><strong>映射规则</strong>: <code>view.</code> 前缀对应 <code>src/views</code> 目录下的文件路径，将 <code>_</code> 转换为 <code>/</code>。</li></ul><p>示例映射关系：</p><ul><li><code>view.manage_user</code> -&gt; <code>src/views/manage/user/index.vue</code></li><li><code>view.about</code> -&gt; <code>src/views/about/index.vue</code></li><li><code>layout.base</code> -&gt; <code>src/layouts/base-layout/index.vue</code></li></ul><hr><h2 id="_4-常用-hooks-与工具" tabindex="-1">4. 常用 Hooks 与工具 <a class="header-anchor" href="#_4-常用-hooks-与工具" aria-label="Permalink to &quot;4. 常用 Hooks 与工具&quot;">​</a></h2><h3 id="_4-1-表格操作-usetable" tabindex="-1">4.1 表格操作 (<code>useTable</code>) <a class="header-anchor" href="#_4-1-表格操作-usetable" aria-label="Permalink to &quot;4.1 表格操作 (\`useTable\`)&quot;">​</a></h3><p><code>src/hooks/common/table.ts</code> 提供了极其强大的表格逻辑封装，支持：</p><ul><li>分页、搜索、加载状态管理。</li><li>增删改查 (CRUD) 弹窗控制。</li></ul><div class="language-typescript vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">typescript</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">const</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">  data</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">  loading</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">  getDataByPage</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">  searchParams</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">} </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> useTable</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">({</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  apiFn: fetchGetList,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  apiParams: {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    keyword: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;&#39;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  },</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">  columns</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: () </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> [ </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">...</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> ]</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">});</span></span></code></pre></div><h3 id="_4-2-权限判断-useauthstore" tabindex="-1">4.2 权限判断 (<code>useAuthStore</code>) <a class="header-anchor" href="#_4-2-权限判断-useauthstore" aria-label="Permalink to &quot;4.2 权限判断 (\`useAuthStore\`)&quot;">​</a></h3><div class="language-typescript vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">typescript</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> auth</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> useAuthStore</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">();</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> canEdit</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> computed</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(() </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> auth.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">hasPermission</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;order:edit&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">));</span></span></code></pre></div><h3 id="_4-3-表单校验-useform" tabindex="-1">4.3 表单校验 (<code>useForm</code>) <a class="header-anchor" href="#_4-3-表单校验-useform" aria-label="Permalink to &quot;4.3 表单校验 (\`useForm\`)&quot;">​</a></h3><p>Naive UI 的表单结合自定义规则：</p><div class="language-typescript vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">typescript</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> rules</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  title: [{ required: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">true</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, message: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;请输入标题&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, trigger: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;blur&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> }],</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">};</span></span></code></pre></div><hr><h2 id="_5-调试与排查" tabindex="-1">5. 调试与排查 <a class="header-anchor" href="#_5-调试与排查" aria-label="Permalink to &quot;5. 调试与排查&quot;">​</a></h2><ul><li><strong>网络请求</strong>: 查看 Chrome DevTools -&gt; Network，确认 Token 是否携带 (<code>Authorization: Bearer ...</code>)。</li><li><strong>路由问题</strong>: 查看 Vue DevTools -&gt; Routes，确认动态路由是否成功挂载。</li><li><strong>图标显示</strong>: 项目使用 UnoCSS Iconify，图标类名如 <code>i-mdi-home</code>。可以在 <a href="https://icones.js.org/" target="_blank" rel="noreferrer">Icones</a> 查找图标。</li></ul><hr><blockquote><p><strong>注意</strong>: 修改 <code>.env</code> 文件后需要重启 <code>pnpm dev</code> 才能生效。</p></blockquote>`,45)])])}const E=i(t,[["render",l]]);export{c as __pageData,E as default};
