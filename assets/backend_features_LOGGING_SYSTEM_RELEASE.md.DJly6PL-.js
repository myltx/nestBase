import{_ as i,c as a,o as n,a0 as t}from"./chunks/framework.CHkYM5Ax.js";const g=JSON.parse('{"title":"æ—¥å¿—ç³»ç»ŸåŠŸèƒ½æ›´æ–°æ–‡æ¡£","description":"","frontmatter":{},"headers":[],"relativePath":"backend/features/LOGGING_SYSTEM_RELEASE.md","filePath":"backend/features/LOGGING_SYSTEM_RELEASE.md","lastUpdated":1762852082000}'),h={name:"backend/features/LOGGING_SYSTEM_RELEASE.md"};function l(p,s,k,e,r,d){return n(),a("div",null,[...s[0]||(s[0]=[t(`<h1 id="æ—¥å¿—ç³»ç»ŸåŠŸèƒ½æ›´æ–°æ–‡æ¡£" tabindex="-1">æ—¥å¿—ç³»ç»ŸåŠŸèƒ½æ›´æ–°æ–‡æ¡£ <a class="header-anchor" href="#æ—¥å¿—ç³»ç»ŸåŠŸèƒ½æ›´æ–°æ–‡æ¡£" aria-label="Permalink to &quot;æ—¥å¿—ç³»ç»ŸåŠŸèƒ½æ›´æ–°æ–‡æ¡£&quot;">â€‹</a></h1><p><strong>æ›´æ–°æ—¶é—´</strong>: 2025-11-11 <strong>ç‰ˆæœ¬</strong>: v1.1.0 <strong>çŠ¶æ€</strong>: âœ… å·²å®Œæˆï¼ˆå¾…æ•°æ®åº“è¿ç§»ï¼‰</p><hr><h2 id="ğŸ“‹-æ›´æ–°æ¦‚è§ˆ" tabindex="-1">ğŸ“‹ æ›´æ–°æ¦‚è§ˆ <a class="header-anchor" href="#ğŸ“‹-æ›´æ–°æ¦‚è§ˆ" aria-label="Permalink to &quot;ğŸ“‹ æ›´æ–°æ¦‚è§ˆ&quot;">â€‹</a></h2><p>æœ¬æ¬¡æ›´æ–°ä¸º NestBase åç«¯ç³»ç»Ÿæ–°å¢äº†å®Œå–„çš„<strong>æ—¥å¿—ç®¡ç†ç³»ç»Ÿ</strong>ï¼ŒåŒ…æ‹¬è®¿é—®æ—¥å¿—ã€ç™»å½•æ—¥å¿—å’Œé”™è¯¯æ—¥å¿—ä¸‰å¤§æ¨¡å—ï¼Œæ”¯æŒæ™ºèƒ½å¼‚å¸¸åˆ†ç±»ã€å®æ—¶ç»Ÿè®¡åˆ†æå’Œå…¨é¢çš„æ—¥å¿—æŸ¥è¯¢åŠŸèƒ½ã€‚</p><h3 id="æ ¸å¿ƒåŠŸèƒ½" tabindex="-1">æ ¸å¿ƒåŠŸèƒ½ <a class="header-anchor" href="#æ ¸å¿ƒåŠŸèƒ½" aria-label="Permalink to &quot;æ ¸å¿ƒåŠŸèƒ½&quot;">â€‹</a></h3><ul><li>âœ… <strong>è®¿é—®æ—¥å¿—è‡ªåŠ¨è®°å½•</strong> - æ‹¦æˆªå™¨è‡ªåŠ¨è®°å½•æ‰€æœ‰æˆåŠŸçš„ HTTP è¯·æ±‚</li><li>âœ… <strong>ç™»å½•æ—¥å¿—è¿½è¸ª</strong> - è®°å½•æˆåŠŸ/å¤±è´¥çš„ç™»å½•å°è¯•åŠåŸå› </li><li>âœ… <strong>å¼‚å¸¸æ—¥å¿—æ•è·</strong> - å…¨å±€å¼‚å¸¸è¿‡æ»¤å™¨è‡ªåŠ¨æ•è·å¹¶åˆ†ç±»è®°å½•é”™è¯¯</li><li>âœ… <strong>æ™ºèƒ½é”™è¯¯åˆ†ç±»</strong> - è‡ªåŠ¨åŒºåˆ†ä¸šåŠ¡å¼‚å¸¸ï¼ˆWARNï¼‰å’Œç³»ç»Ÿå¼‚å¸¸ï¼ˆERRORï¼‰</li><li>âœ… <strong>ç»Ÿè®¡åˆ†ææ¥å£</strong> - æä¾›ä¸°å¯Œçš„æ—¥å¿—ç»Ÿè®¡å’Œåˆ†æåŠŸèƒ½</li><li>âœ… <strong>ç®¡ç†å‘˜ä¸“å±</strong> - æ‰€æœ‰æ—¥å¿—æ¥å£ä»…é™ ADMIN è§’è‰²è®¿é—®</li></ul><hr><h2 id="ğŸ—„ï¸-æ•°æ®åº“å˜æ›´" tabindex="-1">ğŸ—„ï¸ æ•°æ®åº“å˜æ›´ <a class="header-anchor" href="#ğŸ—„ï¸-æ•°æ®åº“å˜æ›´" aria-label="Permalink to &quot;ğŸ—„ï¸ æ•°æ®åº“å˜æ›´&quot;">â€‹</a></h2><h3 id="æ–°å¢æ•°æ®æ¨¡å‹" tabindex="-1">æ–°å¢æ•°æ®æ¨¡å‹ <a class="header-anchor" href="#æ–°å¢æ•°æ®æ¨¡å‹" aria-label="Permalink to &quot;æ–°å¢æ•°æ®æ¨¡å‹&quot;">â€‹</a></h3><h4 id="_1-accesslog-è®¿é—®æ—¥å¿—" tabindex="-1">1. AccessLog (è®¿é—®æ—¥å¿—) <a class="header-anchor" href="#_1-accesslog-è®¿é—®æ—¥å¿—" aria-label="Permalink to &quot;1. AccessLog (è®¿é—®æ—¥å¿—)&quot;">â€‹</a></h4><div class="language-prisma vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">prisma</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">model</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> AccessLog</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  id             </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">String</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">      @id</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> @default</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">uuid</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">())</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  userId         </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">String</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">?</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">     @map</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;user_id&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)           </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// ç”¨æˆ·IDï¼ˆå¯é€‰ï¼‰</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  user           </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">User</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">?</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">       @relation</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(...)             </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// å…³è”ç”¨æˆ·</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  method         </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">String</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">                                 // HTTPæ–¹æ³•</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  path           </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">String</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">                                 // è¯·æ±‚è·¯å¾„</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  query          </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">String</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">?</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">                                // æŸ¥è¯¢å‚æ•°</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  statusCode     </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">Int</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">         @map</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;status_code&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)        </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// å“åº”çŠ¶æ€ç </span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  ip             </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">String</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">                                 // å®¢æˆ·ç«¯IP</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  userAgent      </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">String</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">?</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">     @map</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;user_agent&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) </span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">@db.Text</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"> // User Agent</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  referer        </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">String</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">?</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">                                // æ¥æºé¡µé¢</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  responseTime   </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">Int</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">?</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">        @map</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;response_time&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)      </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// å“åº”æ—¶é—´(ms)</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  errorMessage   </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">String</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">?</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">     @map</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;error_message&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) </span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">@db.Text</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"> // é”™è¯¯ä¿¡æ¯</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  errorStack     </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">String</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">?</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">     @map</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;error_stack&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) </span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">@db.Text</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">   // é”™è¯¯å †æ ˆï¼ˆç³»ç»Ÿå¼‚å¸¸ï¼‰</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  errorLevel     </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">ErrorLevel</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">?</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> @map</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;error_level&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)        </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// é”™è¯¯çº§åˆ«</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  exceptionType  </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">String</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">?</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">     @map</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;exception_type&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)     </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// å¼‚å¸¸ç±»å‹</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  createdAt      </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">DateTime</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">    @default</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">now</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">()) </span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">@map</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;created_at&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">  @@index</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">([</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">userId</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">path</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">statusCode</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">createdAt</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">ip</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">errorLevel</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">])</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">  @@map</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;access_logs&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span></code></pre></div><h4 id="_2-loginlog-ç™»å½•æ—¥å¿—" tabindex="-1">2. LoginLog (ç™»å½•æ—¥å¿—) <a class="header-anchor" href="#_2-loginlog-ç™»å½•æ—¥å¿—" aria-label="Permalink to &quot;2. LoginLog (ç™»å½•æ—¥å¿—)&quot;">â€‹</a></h4><div class="language-prisma vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">prisma</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">model</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> LoginLog</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  id           </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">String</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">      @id</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> @default</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">uuid</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">())</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  userId       </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">String</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">?</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">     @map</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;user_id&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)       </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// ç”¨æˆ·IDï¼ˆå¤±è´¥æ—¶å¯èƒ½ä¸ºnullï¼‰</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  user         </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">User</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">?</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">       @relation</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(...)         </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// å…³è”ç”¨æˆ·</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  email        </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">String</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">                             // ç™»å½•ä½¿ç”¨çš„é‚®ç®±/ç”¨æˆ·å</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  status       </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">LoginStatus</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">                        // ç™»å½•çŠ¶æ€</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  ip           </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">String</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">                             // å®¢æˆ·ç«¯IP</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  userAgent    </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">String</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">?</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">     @map</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;user_agent&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) </span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">@db.Text</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"> // User Agent</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  failReason   </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">String</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">?</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">     @map</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;fail_reason&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)    </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// å¤±è´¥åŸå› </span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  createdAt    </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">DateTime</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">    @default</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">now</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">()) </span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">@map</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;created_at&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">  @@index</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">([</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">userId</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">email</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">status</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">createdAt</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">ip</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">])</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">  @@map</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;login_logs&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span></code></pre></div><h3 id="æ–°å¢æšä¸¾ç±»å‹" tabindex="-1">æ–°å¢æšä¸¾ç±»å‹ <a class="header-anchor" href="#æ–°å¢æšä¸¾ç±»å‹" aria-label="Permalink to &quot;æ–°å¢æšä¸¾ç±»å‹&quot;">â€‹</a></h3><div class="language-prisma vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">prisma</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// ç™»å½•çŠ¶æ€</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">enum</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> LoginStatus</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  SUCCESS </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// ç™»å½•æˆåŠŸ</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  FAILED  </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// ç™»å½•å¤±è´¥</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  LOGOUT  </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// é€€å‡ºç™»å½•</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// é”™è¯¯æ—¥å¿—çº§åˆ«</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">enum</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> ErrorLevel</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  WARN  </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// ä¸šåŠ¡å¼‚å¸¸ï¼ˆå‚æ•°é”™è¯¯ã€æƒé™ä¸è¶³ç­‰ï¼‰</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  ERROR </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// ç³»ç»Ÿå¼‚å¸¸ï¼ˆæ•°æ®åº“é”™è¯¯ã€ç¬¬ä¸‰æ–¹æ¥å£å¤±è´¥ç­‰ï¼‰</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span></code></pre></div><hr><h2 id="ğŸ”§-æ ¸å¿ƒåŠŸèƒ½å®ç°" tabindex="-1">ğŸ”§ æ ¸å¿ƒåŠŸèƒ½å®ç° <a class="header-anchor" href="#ğŸ”§-æ ¸å¿ƒåŠŸèƒ½å®ç°" aria-label="Permalink to &quot;ğŸ”§ æ ¸å¿ƒåŠŸèƒ½å®ç°&quot;">â€‹</a></h2><h3 id="_1-è®¿é—®æ—¥å¿—æ‹¦æˆªå™¨-accessloginterceptor" tabindex="-1">1. è®¿é—®æ—¥å¿—æ‹¦æˆªå™¨ (<code>AccessLogInterceptor</code>) <a class="header-anchor" href="#_1-è®¿é—®æ—¥å¿—æ‹¦æˆªå™¨-accessloginterceptor" aria-label="Permalink to &quot;1. è®¿é—®æ—¥å¿—æ‹¦æˆªå™¨ (\`AccessLogInterceptor\`)&quot;">â€‹</a></h3><p><strong>ä½ç½®</strong>: <code>src/common/interceptors/access-log.interceptor.ts</code></p><p><strong>åŠŸèƒ½</strong>:</p><ul><li>è‡ªåŠ¨æ‹¦æˆªæ‰€æœ‰ HTTP è¯·æ±‚</li><li>è®°å½•æˆåŠŸè¯·æ±‚çš„å®Œæ•´ä¿¡æ¯ï¼ˆ2xx, 3xxï¼‰</li><li>è®¡ç®—è¯·æ±‚å“åº”æ—¶é—´</li><li>è¿‡æ»¤ç³»ç»Ÿç«¯ç‚¹ï¼ˆswaggerã€health checksï¼‰</li><li>å¼‚æ­¥è®°å½•ï¼Œä¸é˜»å¡å“åº”</li></ul><p><strong>è‡ªåŠ¨è®°å½•å­—æ®µ</strong>:</p><ul><li>è¯·æ±‚æ–¹æ³•ã€è·¯å¾„ã€æŸ¥è¯¢å‚æ•°</li><li>å“åº”çŠ¶æ€ç ã€å“åº”æ—¶é—´</li><li>ç”¨æˆ·IDï¼ˆå¦‚æœå·²ç™»å½•ï¼‰</li><li>å®¢æˆ·ç«¯IPã€User Agentã€Referer</li></ul><h3 id="_2-ç™»å½•æ—¥å¿—é›†æˆ-authservice" tabindex="-1">2. ç™»å½•æ—¥å¿—é›†æˆ (<code>AuthService</code>) <a class="header-anchor" href="#_2-ç™»å½•æ—¥å¿—é›†æˆ-authservice" aria-label="Permalink to &quot;2. ç™»å½•æ—¥å¿—é›†æˆ (\`AuthService\`)&quot;">â€‹</a></h3><p><strong>ä½ç½®</strong>: <code>src/modules/auth/auth.service.ts</code></p><p><strong>è®°å½•åœºæ™¯</strong>:</p><table tabindex="0"><thead><tr><th>åœºæ™¯</th><th>çŠ¶æ€</th><th>è®°å½•å†…å®¹</th></tr></thead><tbody><tr><td>ç”¨æˆ·å/å¯†ç é”™è¯¯</td><td>FAILED</td><td>ç™»å½•é‚®ç®±ã€IPã€User Agentã€å¤±è´¥åŸå› </td></tr><tr><td>è´¦æˆ·è¢«ç¦ç”¨</td><td>FAILED</td><td>ç”¨æˆ·IDã€é‚®ç®±ã€IPã€User Agentã€å¤±è´¥åŸå› </td></tr><tr><td>ç™»å½•æˆåŠŸ</td><td>SUCCESS</td><td>ç”¨æˆ·IDã€é‚®ç®±ã€IPã€User Agent</td></tr></tbody></table><p><strong>ç¤ºä¾‹ä»£ç </strong>:</p><div class="language-typescript vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">typescript</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// ç™»å½•å¤±è´¥ - ç”¨æˆ·ä¸å­˜åœ¨</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">await</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> this</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">.logsService.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">createLoginLog</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">({</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  email: userName,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  ip,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  userAgent,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  status: LoginStatus.</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">FAILED</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  failReason: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;ç”¨æˆ·åæˆ–å¯†ç é”™è¯¯&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">});</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// ç™»å½•æˆåŠŸ</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">await</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> this</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">.logsService.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">createLoginLog</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">({</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  userId: user.id,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  email: user.email,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  ip,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  userAgent,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  status: LoginStatus.</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">SUCCESS</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">});</span></span></code></pre></div><h3 id="_3-å…¨å±€å¼‚å¸¸è¿‡æ»¤å™¨-httpexceptionfilter" tabindex="-1">3. å…¨å±€å¼‚å¸¸è¿‡æ»¤å™¨ (<code>HttpExceptionFilter</code>) <a class="header-anchor" href="#_3-å…¨å±€å¼‚å¸¸è¿‡æ»¤å™¨-httpexceptionfilter" aria-label="Permalink to &quot;3. å…¨å±€å¼‚å¸¸è¿‡æ»¤å™¨ (\`HttpExceptionFilter\`)&quot;">â€‹</a></h3><p><strong>ä½ç½®</strong>: <code>src/common/filters/http-exception.filter.ts</code></p><p><strong>æ ¸å¿ƒç‰¹æ€§</strong>:</p><h4 id="æ™ºèƒ½å¼‚å¸¸åˆ†ç±»" tabindex="-1">æ™ºèƒ½å¼‚å¸¸åˆ†ç±» <a class="header-anchor" href="#æ™ºèƒ½å¼‚å¸¸åˆ†ç±»" aria-label="Permalink to &quot;æ™ºèƒ½å¼‚å¸¸åˆ†ç±»&quot;">â€‹</a></h4><div class="language-typescript vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">typescript</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// æ ¹æ® HTTP çŠ¶æ€ç è‡ªåŠ¨åˆ¤æ–­</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">if</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (status </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">&gt;=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 400</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> &amp;&amp;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> status </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">&lt;</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 500</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  errorLevel </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> ErrorLevel.</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">WARN</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;      </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// ä¸šåŠ¡å¼‚å¸¸</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  exceptionType </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &#39;ä¸šåŠ¡å¼‚å¸¸&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">} </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">else</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  errorLevel </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> ErrorLevel.</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">ERROR</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;     </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// ç³»ç»Ÿå¼‚å¸¸</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  exceptionType </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &#39;ç³»ç»Ÿå¼‚å¸¸&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span></code></pre></div><h4 id="åˆ†çº§æ—¥å¿—è¾“å‡º" tabindex="-1">åˆ†çº§æ—¥å¿—è¾“å‡º <a class="header-anchor" href="#åˆ†çº§æ—¥å¿—è¾“å‡º" aria-label="Permalink to &quot;åˆ†çº§æ—¥å¿—è¾“å‡º&quot;">â€‹</a></h4><div class="language-typescript vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">typescript</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// ä¸šåŠ¡å¼‚å¸¸ - ç®€è¦è¾“å‡º</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">if</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (errorLevel </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">===</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> ErrorLevel.</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">ERROR</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) {</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">  this</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">.logger.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">error</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;ç³»ç»Ÿå¼‚å¸¸æ•è·:&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    path, method, status, message,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    exception: exception.stack  </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// å®Œæ•´å †æ ˆ</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  });</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">} </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">else</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">  this</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">.logger.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">warn</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;ä¸šåŠ¡å¼‚å¸¸æ•è·:&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    path, method, status, message</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  });</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span></code></pre></div><h4 id="é”™è¯¯æ—¥å¿—è®°å½•ç­–ç•¥" tabindex="-1">é”™è¯¯æ—¥å¿—è®°å½•ç­–ç•¥ <a class="header-anchor" href="#é”™è¯¯æ—¥å¿—è®°å½•ç­–ç•¥" aria-label="Permalink to &quot;é”™è¯¯æ—¥å¿—è®°å½•ç­–ç•¥&quot;">â€‹</a></h4><table tabindex="0"><thead><tr><th>å¼‚å¸¸ç±»å‹</th><th>HTTPçŠ¶æ€ç </th><th>æ—¥å¿—çº§åˆ«</th><th>è®°å½•å†…å®¹</th><th>è¯´æ˜</th></tr></thead><tbody><tr><td>ä¸šåŠ¡å¼‚å¸¸</td><td>400-499</td><td>WARN</td><td>é”™è¯¯æ¶ˆæ¯ã€è¯·æ±‚ä¿¡æ¯</td><td>å‚æ•°é”™è¯¯ã€æƒé™ä¸è¶³ã€èµ„æºä¸å­˜åœ¨</td></tr><tr><td>ç³»ç»Ÿå¼‚å¸¸</td><td>500-599</td><td>ERROR</td><td>é”™è¯¯æ¶ˆæ¯ã€å®Œæ•´å †æ ˆã€è¯·æ±‚ä¿¡æ¯</td><td>æ•°æ®åº“é”™è¯¯ã€ç¬¬ä¸‰æ–¹æœåŠ¡å¤±è´¥</td></tr></tbody></table><h3 id="_4-æ—¥å¿—æœåŠ¡-logsservice" tabindex="-1">4. æ—¥å¿—æœåŠ¡ (<code>LogsService</code>) <a class="header-anchor" href="#_4-æ—¥å¿—æœåŠ¡-logsservice" aria-label="Permalink to &quot;4. æ—¥å¿—æœåŠ¡ (\`LogsService\`)&quot;">â€‹</a></h3><p><strong>ä½ç½®</strong>: <code>src/modules/logs/logs.service.ts</code></p><p><strong>æ ¸å¿ƒæ–¹æ³•</strong>:</p><div class="language-typescript vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">typescript</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// åˆ›å»ºè®¿é—®æ—¥å¿—</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">async </span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">createAccessLog</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(data: {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  userId?: string;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  method: string;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  path: string;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  statusCode: number;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  ip: string;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  errorMessage</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">?:</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> string;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  errorStack</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">?:</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> string;      </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// æ–°å¢</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  errorLevel</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">?:</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> ErrorLevel;  </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// æ–°å¢</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  exceptionType</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">?:</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> string;   </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// æ–°å¢</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">  // ... å…¶ä»–å­—æ®µ</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">})</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// åˆ›å»ºç™»å½•æ—¥å¿—</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">async </span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">createLoginLog</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(data: {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  userId?: string;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  email: string;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  status: LoginStatus;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  ip: string;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  userAgent</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">?:</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> string;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  failReason</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">?:</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> string;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">})</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// æŸ¥è¯¢è®¿é—®æ—¥å¿—ï¼ˆæ”¯æŒåˆ†é¡µå’Œå¤šæ¡ä»¶è¿‡æ»¤ï¼‰</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">async </span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">findAllAccessLogs</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(queryDto: QueryAccessLogDto)</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// æŸ¥è¯¢ç™»å½•æ—¥å¿—ï¼ˆæ”¯æŒåˆ†é¡µå’Œå¤šæ¡ä»¶è¿‡æ»¤ï¼‰</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">async </span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">findAllLoginLogs</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(queryDto: QueryLoginLogDto)</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// è®¿é—®æ—¥å¿—ç»Ÿè®¡</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">async </span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">getAccessLogStats</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(startDate</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">?:</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> string, endDate</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">?:</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> string)</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// ç™»å½•æ—¥å¿—ç»Ÿè®¡</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">async </span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">getLoginLogStats</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(startDate</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">?:</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> string, endDate</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">?:</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> string)</span></span></code></pre></div><hr><h2 id="ğŸŒ-api-æ¥å£" tabindex="-1">ğŸŒ API æ¥å£ <a class="header-anchor" href="#ğŸŒ-api-æ¥å£" aria-label="Permalink to &quot;ğŸŒ API æ¥å£&quot;">â€‹</a></h2><h3 id="åŸºç¡€ä¿¡æ¯" tabindex="-1">åŸºç¡€ä¿¡æ¯ <a class="header-anchor" href="#åŸºç¡€ä¿¡æ¯" aria-label="Permalink to &quot;åŸºç¡€ä¿¡æ¯&quot;">â€‹</a></h3><ul><li><strong>Base URL</strong>: <code>/api/logs</code></li><li><strong>è®¤è¯</strong>: JWT Bearer Token</li><li><strong>æƒé™</strong>: æ‰€æœ‰æ¥å£ä»…é™ <strong>ADMIN</strong> è§’è‰²</li></ul><h3 id="è®¿é—®æ—¥å¿—æ¥å£" tabindex="-1">è®¿é—®æ—¥å¿—æ¥å£ <a class="header-anchor" href="#è®¿é—®æ—¥å¿—æ¥å£" aria-label="Permalink to &quot;è®¿é—®æ—¥å¿—æ¥å£&quot;">â€‹</a></h3><h4 id="_1-æŸ¥è¯¢è®¿é—®æ—¥å¿—åˆ—è¡¨" tabindex="-1">1. æŸ¥è¯¢è®¿é—®æ—¥å¿—åˆ—è¡¨ <a class="header-anchor" href="#_1-æŸ¥è¯¢è®¿é—®æ—¥å¿—åˆ—è¡¨" aria-label="Permalink to &quot;1. æŸ¥è¯¢è®¿é—®æ—¥å¿—åˆ—è¡¨&quot;">â€‹</a></h4><div class="language-http vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">http</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">GET</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> /api/logs/access</span></span></code></pre></div><p><strong>Query Parameters</strong>:</p><table tabindex="0"><thead><tr><th>å‚æ•°</th><th>ç±»å‹</th><th>å¿…å¡«</th><th>è¯´æ˜</th><th>ç¤ºä¾‹</th></tr></thead><tbody><tr><td>userId</td><td>string</td><td>å¦</td><td>ç”¨æˆ·ID</td><td><code>user-uuid-123</code></td></tr><tr><td>method</td><td>string</td><td>å¦</td><td>HTTPæ–¹æ³•</td><td><code>GET</code>, <code>POST</code></td></tr><tr><td>path</td><td>string</td><td>å¦</td><td>è¯·æ±‚è·¯å¾„ï¼ˆæ”¯æŒæ¨¡ç³Šï¼‰</td><td><code>/api/users</code></td></tr><tr><td>statusCode</td><td>number</td><td>å¦</td><td>å“åº”çŠ¶æ€ç </td><td><code>200</code>, <code>404</code>, <code>500</code></td></tr><tr><td>errorLevel</td><td>string</td><td>å¦</td><td>é”™è¯¯çº§åˆ«</td><td><code>WARN</code>, <code>ERROR</code></td></tr><tr><td>ip</td><td>string</td><td>å¦</td><td>å®¢æˆ·ç«¯IP</td><td><code>192.168.1.1</code></td></tr><tr><td>startDate</td><td>string</td><td>å¦</td><td>å¼€å§‹æ—¶é—´</td><td><code>2025-01-01</code></td></tr><tr><td>endDate</td><td>string</td><td>å¦</td><td>ç»“æŸæ—¶é—´</td><td><code>2025-12-31</code></td></tr><tr><td>current</td><td>string</td><td>å¦</td><td>å½“å‰é¡µç </td><td><code>1</code> (é»˜è®¤)</td></tr><tr><td>size</td><td>string</td><td>å¦</td><td>æ¯é¡µæ•°é‡</td><td><code>10</code> (é»˜è®¤)</td></tr></tbody></table><p><strong>Response</strong>:</p><div class="language-json vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">json</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">{</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">  &quot;success&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">true</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">  &quot;data&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: {</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">    &quot;records&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: [</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">      {</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">        &quot;id&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;log-uuid-123&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">        &quot;userId&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;user-uuid-456&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">        &quot;user&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: {</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">          &quot;id&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;user-uuid-456&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">          &quot;userName&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;john_doe&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">          &quot;nickName&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;John&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">          &quot;email&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;john@example.com&quot;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        },</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">        &quot;method&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;POST&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">        &quot;path&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;/api/auth/login&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">        &quot;query&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;{}&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">        &quot;statusCode&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">401</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">        &quot;ip&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;192.168.1.100&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">        &quot;userAgent&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;Mozilla/5.0...&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">        &quot;referer&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;https://example.com&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">        &quot;responseTime&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">null</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">        &quot;errorMessage&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;ç”¨æˆ·åæˆ–å¯†ç é”™è¯¯&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">        &quot;errorStack&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">null</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">        &quot;errorLevel&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;WARN&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">        &quot;exceptionType&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;ä¸šåŠ¡å¼‚å¸¸&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">        &quot;createdAt&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;2025-11-11T08:30:00.000Z&quot;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">      }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    ],</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">    &quot;current&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">1</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">    &quot;size&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">10</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">    &quot;total&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">156</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">    &quot;totalPages&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">16</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span></code></pre></div><h4 id="_2-è®¿é—®æ—¥å¿—ç»Ÿè®¡" tabindex="-1">2. è®¿é—®æ—¥å¿—ç»Ÿè®¡ <a class="header-anchor" href="#_2-è®¿é—®æ—¥å¿—ç»Ÿè®¡" aria-label="Permalink to &quot;2. è®¿é—®æ—¥å¿—ç»Ÿè®¡&quot;">â€‹</a></h4><div class="language-http vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">http</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">GET</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> /api/logs/access/stats?startDate=2025-11-01&amp;endDate=2025-11-30</span></span></code></pre></div><p><strong>Response</strong>:</p><div class="language-json vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">json</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">{</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">  &quot;success&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">true</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">  &quot;data&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: {</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">    &quot;totalCount&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">15234</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,           </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// æ€»è®¿é—®é‡</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">    &quot;successCount&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">14089</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,         </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// æˆåŠŸè¯·æ±‚æ•° (2xx, 3xx)</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">    &quot;errorCount&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">1145</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,            </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// é”™è¯¯è¯·æ±‚æ•° (4xx, 5xx)</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">    &quot;uniqueUsers&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">387</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,            </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// ç‹¬ç«‹ç”¨æˆ·æ•°</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">    &quot;uniqueIps&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">521</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,              </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// ç‹¬ç«‹IPæ•°</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">    &quot;avgResponseTime&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">142</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,        </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// å¹³å‡å“åº”æ—¶é—´(ms)</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">    &quot;topPaths&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: [                  </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// è®¿é—®æœ€å¤šçš„è·¯å¾„ TOP 10</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">      { </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">&quot;path&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;/api/contents&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">&quot;count&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;3214&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> },</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">      { </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">&quot;path&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;/api/auth/login&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">&quot;count&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;2156&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    ],</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">    &quot;statusCodeDistribution&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: [    </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// çŠ¶æ€ç åˆ†å¸ƒ</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">      { </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">&quot;status_range&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;2xx&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">&quot;count&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;12456&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> },</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">      { </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">&quot;status_range&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;4xx&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">&quot;count&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;891&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> },</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">      { </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">&quot;status_range&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;5xx&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">&quot;count&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;254&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    ]</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span></code></pre></div><h3 id="ç™»å½•æ—¥å¿—æ¥å£" tabindex="-1">ç™»å½•æ—¥å¿—æ¥å£ <a class="header-anchor" href="#ç™»å½•æ—¥å¿—æ¥å£" aria-label="Permalink to &quot;ç™»å½•æ—¥å¿—æ¥å£&quot;">â€‹</a></h3><h4 id="_3-æŸ¥è¯¢ç™»å½•æ—¥å¿—åˆ—è¡¨" tabindex="-1">3. æŸ¥è¯¢ç™»å½•æ—¥å¿—åˆ—è¡¨ <a class="header-anchor" href="#_3-æŸ¥è¯¢ç™»å½•æ—¥å¿—åˆ—è¡¨" aria-label="Permalink to &quot;3. æŸ¥è¯¢ç™»å½•æ—¥å¿—åˆ—è¡¨&quot;">â€‹</a></h4><div class="language-http vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">http</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">GET</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> /api/logs/login</span></span></code></pre></div><p><strong>Query Parameters</strong>:</p><table tabindex="0"><thead><tr><th>å‚æ•°</th><th>ç±»å‹</th><th>å¿…å¡«</th><th>è¯´æ˜</th><th>ç¤ºä¾‹</th></tr></thead><tbody><tr><td>userId</td><td>string</td><td>å¦</td><td>ç”¨æˆ·ID</td><td><code>user-uuid-123</code></td></tr><tr><td>email</td><td>string</td><td>å¦</td><td>ç™»å½•é‚®ç®±ï¼ˆæ¨¡ç³Šï¼‰</td><td><code>john@</code></td></tr><tr><td>status</td><td>LoginStatus</td><td>å¦</td><td>ç™»å½•çŠ¶æ€</td><td><code>SUCCESS</code>, <code>FAILED</code>, <code>LOGOUT</code></td></tr><tr><td>ip</td><td>string</td><td>å¦</td><td>å®¢æˆ·ç«¯IP</td><td><code>192.168.1.1</code></td></tr><tr><td>startDate</td><td>string</td><td>å¦</td><td>å¼€å§‹æ—¶é—´</td><td><code>2025-01-01</code></td></tr><tr><td>endDate</td><td>string</td><td>å¦</td><td>ç»“æŸæ—¶é—´</td><td><code>2025-12-31</code></td></tr><tr><td>current</td><td>string</td><td>å¦</td><td>å½“å‰é¡µç </td><td><code>1</code> (é»˜è®¤)</td></tr><tr><td>size</td><td>string</td><td>å¦</td><td>æ¯é¡µæ•°é‡</td><td><code>10</code> (é»˜è®¤)</td></tr></tbody></table><p><strong>Response</strong>:</p><div class="language-json vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">json</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">{</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">  &quot;success&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">true</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">  &quot;data&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: {</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">    &quot;records&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: [</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">      {</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">        &quot;id&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;log-uuid-789&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">        &quot;userId&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;user-uuid-456&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">        &quot;user&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: {</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">          &quot;id&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;user-uuid-456&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">          &quot;userName&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;john_doe&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">          &quot;nickName&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;John&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">          &quot;email&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;john@example.com&quot;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        },</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">        &quot;email&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;john@example.com&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">        &quot;status&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;FAILED&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">        &quot;ip&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;192.168.1.100&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">        &quot;userAgent&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;Mozilla/5.0...&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">        &quot;failReason&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;ç”¨æˆ·åæˆ–å¯†ç é”™è¯¯&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">        &quot;createdAt&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;2025-11-11T08:25:30.000Z&quot;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">      }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    ],</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">    &quot;current&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">1</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">    &quot;size&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">10</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">    &quot;total&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">89</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">    &quot;totalPages&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">9</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span></code></pre></div><h4 id="_4-ç™»å½•æ—¥å¿—ç»Ÿè®¡" tabindex="-1">4. ç™»å½•æ—¥å¿—ç»Ÿè®¡ <a class="header-anchor" href="#_4-ç™»å½•æ—¥å¿—ç»Ÿè®¡" aria-label="Permalink to &quot;4. ç™»å½•æ—¥å¿—ç»Ÿè®¡&quot;">â€‹</a></h4><div class="language-http vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">http</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">GET</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> /api/logs/login/stats?startDate=2025-11-01&amp;endDate=2025-11-30</span></span></code></pre></div><p><strong>Response</strong>:</p><div class="language-json vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">json</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">{</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">  &quot;success&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">true</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">  &quot;data&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: {</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">    &quot;totalCount&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">2341</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,            </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// æ€»ç™»å½•æ¬¡æ•°</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">    &quot;successCount&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">2156</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,          </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// æˆåŠŸç™»å½•æ•°</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">    &quot;failedCount&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">185</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,            </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// å¤±è´¥ç™»å½•æ•°</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">    &quot;logoutCount&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">0</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,              </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// é€€å‡ºç™»å½•æ•°</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">    &quot;uniqueUsers&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">387</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,            </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// ç‹¬ç«‹ç”¨æˆ·æ•°</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">    &quot;uniqueIps&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">521</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,              </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// ç‹¬ç«‹IPæ•°</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">    &quot;successRate&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;92.10%&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,       </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// ç™»å½•æˆåŠŸç‡</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">    &quot;topFailReasons&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: [            </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// å¤±è´¥åŸå›  TOP 5</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">      { </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">&quot;fail_reason&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;ç”¨æˆ·åæˆ–å¯†ç é”™è¯¯&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">&quot;count&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;142&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> },</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">      { </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">&quot;fail_reason&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;è´¦æˆ·å·²è¢«ç¦ç”¨&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">&quot;count&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;43&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    ]</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span></code></pre></div><hr><h2 id="ğŸ“Š-ä½¿ç”¨åœºæ™¯" tabindex="-1">ğŸ“Š ä½¿ç”¨åœºæ™¯ <a class="header-anchor" href="#ğŸ“Š-ä½¿ç”¨åœºæ™¯" aria-label="Permalink to &quot;ğŸ“Š ä½¿ç”¨åœºæ™¯&quot;">â€‹</a></h2><h3 id="_1-ç›‘æ§ç³»ç»Ÿå¥åº·çŠ¶å†µ" tabindex="-1">1. ç›‘æ§ç³»ç»Ÿå¥åº·çŠ¶å†µ <a class="header-anchor" href="#_1-ç›‘æ§ç³»ç»Ÿå¥åº·çŠ¶å†µ" aria-label="Permalink to &quot;1. ç›‘æ§ç³»ç»Ÿå¥åº·çŠ¶å†µ&quot;">â€‹</a></h3><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># æŸ¥çœ‹ç³»ç»Ÿå¼‚å¸¸æ—¥å¿—</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">GET</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> /api/logs/access?errorLevel=ERROR</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&amp;current</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">1</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&amp;size</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">20</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># è·å–æœ€è¿‘ä¸€å‘¨çš„è®¿é—®ç»Ÿè®¡</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">GET</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> /api/logs/access/stats?startDate=2025-11-04</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&amp;endDate</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">2025-11-11</span></span></code></pre></div><h3 id="_2-å®‰å…¨å®¡è®¡" tabindex="-1">2. å®‰å…¨å®¡è®¡ <a class="header-anchor" href="#_2-å®‰å…¨å®¡è®¡" aria-label="Permalink to &quot;2. å®‰å…¨å®¡è®¡&quot;">â€‹</a></h3><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># æŸ¥çœ‹å¤±è´¥çš„ç™»å½•å°è¯•</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">GET</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> /api/logs/login?status=FAILED</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&amp;current</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">1</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&amp;size</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">50</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># æŸ¥çœ‹ç‰¹å®šIPçš„è®¿é—®è®°å½•</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">GET</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> /api/logs/access?ip=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">192.168.1.100</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># æŸ¥çœ‹ç‰¹å®šç”¨æˆ·çš„æ‰€æœ‰æ“ä½œ</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">GET</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> /api/logs/access?userId=user-uuid-123</span></span></code></pre></div><h3 id="_3-æ€§èƒ½åˆ†æ" tabindex="-1">3. æ€§èƒ½åˆ†æ <a class="header-anchor" href="#_3-æ€§èƒ½åˆ†æ" aria-label="Permalink to &quot;3. æ€§èƒ½åˆ†æ&quot;">â€‹</a></h3><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># è·å–å“åº”æ—¶é—´ç»Ÿè®¡</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">GET</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> /api/logs/access/stats</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># æŸ¥çœ‹æ…¢è¯·æ±‚ï¼ˆé…åˆå“åº”æ—¶é—´å­—æ®µï¼‰</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">GET</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> /api/logs/access?current=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">1</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&amp;size</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">100</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># æ‰‹åŠ¨åˆ†æå“åº”æ—¶é—´è¶…è¿‡1000msçš„è¯·æ±‚</span></span></code></pre></div><h3 id="_4-ä¸šåŠ¡åˆ†æ" tabindex="-1">4. ä¸šåŠ¡åˆ†æ <a class="header-anchor" href="#_4-ä¸šåŠ¡åˆ†æ" aria-label="Permalink to &quot;4. ä¸šåŠ¡åˆ†æ&quot;">â€‹</a></h3><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># æŸ¥çœ‹æœ€å—æ¬¢è¿çš„æ¥å£</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">GET</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> /api/logs/access/stats</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># æŸ¥çœ‹ topPaths å­—æ®µ</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># åˆ†æç™»å½•è¡Œä¸º</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">GET</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> /api/logs/login/stats</span></span></code></pre></div><hr><h2 id="ğŸš€-éƒ¨ç½²æ­¥éª¤" tabindex="-1">ğŸš€ éƒ¨ç½²æ­¥éª¤ <a class="header-anchor" href="#ğŸš€-éƒ¨ç½²æ­¥éª¤" aria-label="Permalink to &quot;ğŸš€ éƒ¨ç½²æ­¥éª¤&quot;">â€‹</a></h2><h3 id="å‰ç½®æ¡ä»¶" tabindex="-1">å‰ç½®æ¡ä»¶ <a class="header-anchor" href="#å‰ç½®æ¡ä»¶" aria-label="Permalink to &quot;å‰ç½®æ¡ä»¶&quot;">â€‹</a></h3><ul><li>âœ… ä»£ç å·²æ›´æ–°å®Œæˆ</li><li>âš ï¸ éœ€è¦ Supabase æ•°æ®åº“åœ¨çº¿</li><li>âš ï¸ éœ€è¦è¿è¡Œæ•°æ®åº“è¿ç§»</li></ul><h3 id="éƒ¨ç½²æµç¨‹" tabindex="-1">éƒ¨ç½²æµç¨‹ <a class="header-anchor" href="#éƒ¨ç½²æµç¨‹" aria-label="Permalink to &quot;éƒ¨ç½²æµç¨‹&quot;">â€‹</a></h3><ol><li><p><strong>ç¡®ä¿ Supabase æ•°æ®åº“åœ¨çº¿</strong></p><p>ç™»å½• <a href="https://app.supabase.com" target="_blank" rel="noreferrer">Supabase Dashboard</a>ï¼Œç¡®è®¤é¡¹ç›®çŠ¶æ€ä¸º &quot;Active&quot;ã€‚</p></li><li><p><strong>é‡æ–°ç”Ÿæˆ Prisma Client</strong></p></li></ol><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">npx</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> prisma</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> generate</span></span></code></pre></div><ol start="3"><li><strong>åº”ç”¨æ•°æ®åº“Schemaå˜æ›´</strong></li></ol><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># å¼€å‘ç¯å¢ƒï¼ˆæ¨èï¼‰</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">npx</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> prisma</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> db</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> push</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># æˆ–ç”Ÿäº§ç¯å¢ƒè¿ç§»</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">npx</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> prisma</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> migrate</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> dev</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> --name</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> add_logging_system</span></span></code></pre></div><ol start="4"><li><strong>éªŒè¯è¿ç§»æˆåŠŸ</strong></li></ol><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">npx</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> prisma</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> studio</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># æ£€æŸ¥æ˜¯å¦æ–°å¢äº† access_logs å’Œ login_logs è¡¨</span></span></code></pre></div><ol start="5"><li><strong>é‡å¯åº”ç”¨</strong></li></ol><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">pnpm</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> dev</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">  # å¼€å‘ç¯å¢ƒ</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># æˆ–</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">pnpm</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> build</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> &amp;&amp; </span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">pnpm</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> start:prod</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">  # ç”Ÿäº§ç¯å¢ƒ</span></span></code></pre></div><ol start="6"><li><strong>åŠŸèƒ½æµ‹è¯•</strong></li></ol><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># æµ‹è¯•ç™»å½•æ—¥å¿—</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">curl</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -X</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> POST</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> http://localhost:9423/api/auth/login</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> \\</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">  -H</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &quot;Content-Type: application/json&quot;</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> \\</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">  -d</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &#39;{&quot;userName&quot;:&quot;admin@example.com&quot;,&quot;password&quot;:&quot;wrong_password&quot;}&#39;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># æŸ¥çœ‹ç™»å½•æ—¥å¿—ï¼ˆéœ€è¦ admin tokenï¼‰</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">curl</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> http://localhost:9423/api/logs/login</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> \\</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">  -H</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &quot;Authorization: Bearer YOUR_ADMIN_TOKEN&quot;</span></span></code></pre></div><hr><h2 id="âš ï¸-æ³¨æ„äº‹é¡¹" tabindex="-1">âš ï¸ æ³¨æ„äº‹é¡¹ <a class="header-anchor" href="#âš ï¸-æ³¨æ„äº‹é¡¹" aria-label="Permalink to &quot;âš ï¸ æ³¨æ„äº‹é¡¹&quot;">â€‹</a></h2><h3 id="æ€§èƒ½è€ƒè™‘" tabindex="-1">æ€§èƒ½è€ƒè™‘ <a class="header-anchor" href="#æ€§èƒ½è€ƒè™‘" aria-label="Permalink to &quot;æ€§èƒ½è€ƒè™‘&quot;">â€‹</a></h3><ol><li><strong>å¼‚æ­¥æ—¥å¿—è®°å½•</strong>: æ‰€æœ‰æ—¥å¿—è®°å½•éƒ½æ˜¯å¼‚æ­¥çš„ï¼Œä¸ä¼šé˜»å¡HTTPå“åº”</li><li><strong>æ•°æ®åº“ç´¢å¼•</strong>: å·²ä¸ºå¸¸ç”¨æŸ¥è¯¢å­—æ®µæ·»åŠ ç´¢å¼•ï¼ˆuserId, path, statusCode, createdAt, ip, errorLevelï¼‰</li><li><strong>æ—¥å¿—è½®è½¬</strong>: å»ºè®®å®šæœŸæ¸…ç†æ—§æ—¥å¿—æ•°æ®ï¼ˆå¯é€šè¿‡å®šæ—¶ä»»åŠ¡å®ç°ï¼‰</li></ol><h3 id="å®‰å…¨è€ƒè™‘" tabindex="-1">å®‰å…¨è€ƒè™‘ <a class="header-anchor" href="#å®‰å…¨è€ƒè™‘" aria-label="Permalink to &quot;å®‰å…¨è€ƒè™‘&quot;">â€‹</a></h3><ol><li><strong>æ•æ„Ÿä¿¡æ¯</strong>: æ—¥å¿—ä¸ä¼šè®°å½•å¯†ç ç­‰æ•æ„Ÿæ•°æ®</li><li><strong>è®¿é—®æ§åˆ¶</strong>: æ‰€æœ‰æ—¥å¿—æ¥å£ä»…é™ ADMIN è§’è‰²è®¿é—®</li><li><strong>å †æ ˆä¿¡æ¯</strong>: ä»…ç³»ç»Ÿå¼‚å¸¸ï¼ˆERRORçº§åˆ«ï¼‰è®°å½•å®Œæ•´å †æ ˆï¼Œé¿å…æ³„éœ²è¿‡å¤šä¿¡æ¯</li></ol><h3 id="å­˜å‚¨ä¼˜åŒ–" tabindex="-1">å­˜å‚¨ä¼˜åŒ– <a class="header-anchor" href="#å­˜å‚¨ä¼˜åŒ–" aria-label="Permalink to &quot;å­˜å‚¨ä¼˜åŒ–&quot;">â€‹</a></h3><ol><li><strong>errorStack</strong> å­—æ®µä»…åœ¨ç³»ç»Ÿå¼‚å¸¸æ—¶è®°å½•ï¼ŒèŠ‚çœå­˜å‚¨ç©ºé—´</li><li><strong>TEXT</strong> ç±»å‹ç”¨äº userAgentã€errorMessageã€errorStack ç­‰é•¿æ–‡æœ¬å­—æ®µ</li><li>å»ºè®®å®šæœŸå½’æ¡£æˆ–åˆ é™¤è¶…è¿‡ 90 å¤©çš„æ—¥å¿—æ•°æ®</li></ol><hr><h2 id="ğŸ“ˆ-æ•°æ®å¢é•¿é¢„ä¼°" tabindex="-1">ğŸ“ˆ æ•°æ®å¢é•¿é¢„ä¼° <a class="header-anchor" href="#ğŸ“ˆ-æ•°æ®å¢é•¿é¢„ä¼°" aria-label="Permalink to &quot;ğŸ“ˆ æ•°æ®å¢é•¿é¢„ä¼°&quot;">â€‹</a></h2><h3 id="å•æ—¥æ•°æ®é‡ä¼°ç®—" tabindex="-1">å•æ—¥æ•°æ®é‡ä¼°ç®— <a class="header-anchor" href="#å•æ—¥æ•°æ®é‡ä¼°ç®—" aria-label="Permalink to &quot;å•æ—¥æ•°æ®é‡ä¼°ç®—&quot;">â€‹</a></h3><p>å‡è®¾æ—¥å‡æ´»è·ƒç”¨æˆ· 1000 äººï¼Œæ¯äººå¹³å‡ 50 æ¬¡è¯·æ±‚ï¼š</p><ul><li><strong>è®¿é—®æ—¥å¿—</strong>: 50,000 æ¡/å¤© â‰ˆ 150MB/å¤©</li><li><strong>ç™»å½•æ—¥å¿—</strong>: 1,000 æ¡/å¤© â‰ˆ 3MB/å¤©</li><li><strong>é”™è¯¯æ—¥å¿—</strong>: 500 æ¡/å¤© â‰ˆ 1.5MB/å¤©</li></ul><h3 id="å­˜å‚¨å»ºè®®" tabindex="-1">å­˜å‚¨å»ºè®® <a class="header-anchor" href="#å­˜å‚¨å»ºè®®" aria-label="Permalink to &quot;å­˜å‚¨å»ºè®®&quot;">â€‹</a></h3><ul><li><strong>çŸ­æœŸå­˜å‚¨</strong>ï¼ˆ30å¤©ï¼‰: â‰ˆ 4.6GB</li><li><strong>ä¸­æœŸå­˜å‚¨</strong>ï¼ˆ90å¤©ï¼‰: â‰ˆ 13.8GB</li><li><strong>é•¿æœŸå­˜å‚¨</strong>ï¼ˆ1å¹´ï¼‰: â‰ˆ 56GB</li></ul><p>å»ºè®®ï¼š</p><ul><li>çƒ­æ•°æ®ä¿ç•™ 30 å¤©åœ¨ä¸»æ•°æ®åº“</li><li>æ¸©æ•°æ®ï¼ˆ31-90å¤©ï¼‰å¯è€ƒè™‘å½’æ¡£åˆ°å¯¹è±¡å­˜å‚¨</li><li>å†·æ•°æ®ï¼ˆ90å¤©ä»¥ä¸Šï¼‰å‹ç¼©å½’æ¡£æˆ–åˆ é™¤</li></ul><hr><h2 id="ğŸ”-æ•…éšœæ’æŸ¥" tabindex="-1">ğŸ” æ•…éšœæ’æŸ¥ <a class="header-anchor" href="#ğŸ”-æ•…éšœæ’æŸ¥" aria-label="Permalink to &quot;ğŸ” æ•…éšœæ’æŸ¥&quot;">â€‹</a></h2><h3 id="é—®é¢˜1-æ—¥å¿—æœªè®°å½•" tabindex="-1">é—®é¢˜1: æ—¥å¿—æœªè®°å½• <a class="header-anchor" href="#é—®é¢˜1-æ—¥å¿—æœªè®°å½•" aria-label="Permalink to &quot;é—®é¢˜1: æ—¥å¿—æœªè®°å½•&quot;">â€‹</a></h3><p><strong>å¯èƒ½åŸå› </strong>:</p><ul><li>LogsModule æœªæ­£ç¡®å¯¼å…¥</li><li>æ‹¦æˆªå™¨æœªæ³¨å†Œ</li><li>å¼‚å¸¸è¿‡æ»¤å™¨æœªæ³¨å†Œ</li></ul><p><strong>è§£å†³æ–¹æ³•</strong>:</p><div class="language-typescript vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">typescript</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// æ£€æŸ¥ app.module.ts</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">imports</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: [</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">  // ... å…¶ä»–æ¨¡å—</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  LogsModule,  </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// âœ… ç¡®ä¿å·²å¯¼å…¥</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">],</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">providers</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: [</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    provide: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">APP_INTERCEPTOR</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    useClass: AccessLogInterceptor,  </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// âœ… è®¿é—®æ—¥å¿—æ‹¦æˆªå™¨</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  },</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    provide: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">APP_FILTER</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    useClass: HttpExceptionFilter,   </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// âœ… å¼‚å¸¸è¿‡æ»¤å™¨</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  },</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">]</span></span></code></pre></div><h3 id="é—®é¢˜2-prismaç±»å‹é”™è¯¯" tabindex="-1">é—®é¢˜2: Prismaç±»å‹é”™è¯¯ <a class="header-anchor" href="#é—®é¢˜2-prismaç±»å‹é”™è¯¯" aria-label="Permalink to &quot;é—®é¢˜2: Prismaç±»å‹é”™è¯¯&quot;">â€‹</a></h3><p><strong>é”™è¯¯ä¿¡æ¯</strong>:</p><div class="language- vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span>Module &#39;&quot;@prisma/client&quot;&#39; has no exported member &#39;LoginStatus&#39;</span></span>
<span class="line"><span>Module &#39;&quot;@prisma/client&quot;&#39; has no exported member &#39;ErrorLevel&#39;</span></span></code></pre></div><p><strong>è§£å†³æ–¹æ³•</strong>:</p><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># é‡æ–°ç”Ÿæˆ Prisma Client</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">npx</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> prisma</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> generate</span></span></code></pre></div><h3 id="é—®é¢˜3-æ•°æ®åº“è¿æ¥å¤±è´¥" tabindex="-1">é—®é¢˜3: æ•°æ®åº“è¿æ¥å¤±è´¥ <a class="header-anchor" href="#é—®é¢˜3-æ•°æ®åº“è¿æ¥å¤±è´¥" aria-label="Permalink to &quot;é—®é¢˜3: æ•°æ®åº“è¿æ¥å¤±è´¥&quot;">â€‹</a></h3><p><strong>é”™è¯¯ä¿¡æ¯</strong>:</p><div class="language- vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span>Can&#39;t reach database server at \`aws-1-ap-northeast-1.pooler.supabase.com:6543\`</span></span></code></pre></div><p><strong>è§£å†³æ–¹æ³•</strong>:</p><ol><li>æ£€æŸ¥ Supabase é¡¹ç›®çŠ¶æ€ï¼ˆå¯èƒ½å·²æš‚åœï¼‰</li><li>æ£€æŸ¥ç½‘ç»œè¿æ¥</li><li>éªŒè¯ <code>.env</code> æ–‡ä»¶ä¸­çš„ <code>DATABASE_URL</code> å’Œ <code>DIRECT_URL</code></li></ol><hr><h2 id="ğŸ“š-ç›¸å…³æ–‡æ¡£" tabindex="-1">ğŸ“š ç›¸å…³æ–‡æ¡£ <a class="header-anchor" href="#ğŸ“š-ç›¸å…³æ–‡æ¡£" aria-label="Permalink to &quot;ğŸ“š ç›¸å…³æ–‡æ¡£&quot;">â€‹</a></h2><ul><li><a href="https://www.prisma.io/docs/reference/api-reference/prisma-schema-reference" target="_blank" rel="noreferrer">Prisma Schema Reference</a></li><li><a href="https://docs.nestjs.com/interceptors" target="_blank" rel="noreferrer">NestJS Interceptors</a></li><li><a href="https://docs.nestjs.com/exception-filters" target="_blank" rel="noreferrer">NestJS Exception Filters</a></li><li><a href="https://supabase.com/docs" target="_blank" rel="noreferrer">Supabase Documentation</a></li></ul><hr><h2 id="ğŸ¯-åç»­ä¼˜åŒ–è®¡åˆ’" tabindex="-1">ğŸ¯ åç»­ä¼˜åŒ–è®¡åˆ’ <a class="header-anchor" href="#ğŸ¯-åç»­ä¼˜åŒ–è®¡åˆ’" aria-label="Permalink to &quot;ğŸ¯ åç»­ä¼˜åŒ–è®¡åˆ’&quot;">â€‹</a></h2><h3 id="çŸ­æœŸ-1-2å‘¨" tabindex="-1">çŸ­æœŸï¼ˆ1-2å‘¨ï¼‰ <a class="header-anchor" href="#çŸ­æœŸ-1-2å‘¨" aria-label="Permalink to &quot;çŸ­æœŸï¼ˆ1-2å‘¨ï¼‰&quot;">â€‹</a></h3><ul><li>[ ] æ·»åŠ æ—¥å¿—è‡ªåŠ¨æ¸…ç†å®šæ—¶ä»»åŠ¡</li><li>[ ] å®ç°æ—¥å¿—å¯¼å‡ºåŠŸèƒ½ï¼ˆCSV/JSONï¼‰</li><li>[ ] æ·»åŠ æ—¥å¿—å¯è§†åŒ–çœ‹æ¿</li></ul><h3 id="ä¸­æœŸ-1-2æœˆ" tabindex="-1">ä¸­æœŸï¼ˆ1-2æœˆï¼‰ <a class="header-anchor" href="#ä¸­æœŸ-1-2æœˆ" aria-label="Permalink to &quot;ä¸­æœŸï¼ˆ1-2æœˆï¼‰&quot;">â€‹</a></h3><ul><li>[ ] å®ç°æ—¥å¿—å…¨æ–‡æœç´¢ï¼ˆElasticSearché›†æˆï¼‰</li><li>[ ] æ·»åŠ å®æ—¶æ—¥å¿—æµï¼ˆWebSocketï¼‰</li><li>[ ] å®ç°æ—¥å¿—å‘Šè­¦åŠŸèƒ½ï¼ˆé”™è¯¯ç‡è¿‡é«˜è‡ªåŠ¨é€šçŸ¥ï¼‰</li></ul><h3 id="é•¿æœŸ-3-6æœˆ" tabindex="-1">é•¿æœŸï¼ˆ3-6æœˆï¼‰ <a class="header-anchor" href="#é•¿æœŸ-3-6æœˆ" aria-label="Permalink to &quot;é•¿æœŸï¼ˆ3-6æœˆï¼‰&quot;">â€‹</a></h3><ul><li>[ ] æ—¥å¿—åˆ†æAIåŠ©æ‰‹</li><li>[ ] å¼‚å¸¸è‡ªåŠ¨è¯Šæ–­</li><li>[ ] æ€§èƒ½ç“¶é¢ˆè‡ªåŠ¨è¯†åˆ«</li></ul><hr><h2 id="ğŸ“-æ›´æ–°æ—¥å¿—" tabindex="-1">ğŸ“ æ›´æ–°æ—¥å¿— <a class="header-anchor" href="#ğŸ“-æ›´æ–°æ—¥å¿—" aria-label="Permalink to &quot;ğŸ“ æ›´æ–°æ—¥å¿—&quot;">â€‹</a></h2><h3 id="v1-1-0-2025-11-11" tabindex="-1">v1.1.0 (2025-11-11) <a class="header-anchor" href="#v1-1-0-2025-11-11" aria-label="Permalink to &quot;v1.1.0 (2025-11-11)&quot;">â€‹</a></h3><p><strong>æ–°å¢åŠŸèƒ½</strong>:</p><ul><li>âœ… è®¿é—®æ—¥å¿—è‡ªåŠ¨è®°å½•</li><li>âœ… ç™»å½•æ—¥å¿—è¿½è¸ª</li><li>âœ… å¼‚å¸¸æ—¥å¿—æ™ºèƒ½åˆ†ç±»</li><li>âœ… æ—¥å¿—æŸ¥è¯¢æ¥å£</li><li>âœ… æ—¥å¿—ç»Ÿè®¡åˆ†æ</li></ul><p><strong>æ•°æ®åº“å˜æ›´</strong>:</p><ul><li>æ–°å¢ <code>AccessLog</code> æ¨¡å‹</li><li>æ–°å¢ <code>LoginLog</code> æ¨¡å‹</li><li>æ–°å¢ <code>LoginStatus</code> æšä¸¾</li><li>æ–°å¢ <code>ErrorLevel</code> æšä¸¾</li></ul><p><strong>APIå˜æ›´</strong>:</p><ul><li>æ–°å¢ <code>GET /api/logs/access</code></li><li>æ–°å¢ <code>GET /api/logs/access/stats</code></li><li>æ–°å¢ <code>GET /api/logs/login</code></li><li>æ–°å¢ <code>GET /api/logs/login/stats</code></li></ul><hr><p><strong>æ–‡æ¡£ç»´æŠ¤</strong>: Claude Code <strong>æœ€åæ›´æ–°</strong>: 2025-11-11 <strong>æ–‡æ¡£ç‰ˆæœ¬</strong>: 1.0.0</p>`,150)])])}const o=i(h,[["render",l]]);export{g as __pageData,o as default};
