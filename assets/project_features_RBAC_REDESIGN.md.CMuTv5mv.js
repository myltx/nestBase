import{_ as i,c as a,o as n,a0 as t}from"./chunks/framework.CHkYM5Ax.js";const o=JSON.parse('{"title":"ğŸ”„ RBAC æƒé™ç³»ç»Ÿé‡æ–°è®¾è®¡æ–¹æ¡ˆ","description":"","frontmatter":{},"headers":[],"relativePath":"project/features/RBAC_REDESIGN.md","filePath":"project/features/RBAC_REDESIGN.md","lastUpdated":1762852082000}'),l={name:"project/features/RBAC_REDESIGN.md"};function h(p,s,k,e,d,r){return n(),a("div",null,[...s[0]||(s[0]=[t(`<h1 id="ğŸ”„-rbac-æƒé™ç³»ç»Ÿé‡æ–°è®¾è®¡æ–¹æ¡ˆ" tabindex="-1">ğŸ”„ RBAC æƒé™ç³»ç»Ÿé‡æ–°è®¾è®¡æ–¹æ¡ˆ <a class="header-anchor" href="#ğŸ”„-rbac-æƒé™ç³»ç»Ÿé‡æ–°è®¾è®¡æ–¹æ¡ˆ" aria-label="Permalink to &quot;ğŸ”„ RBAC æƒé™ç³»ç»Ÿé‡æ–°è®¾è®¡æ–¹æ¡ˆ&quot;">â€‹</a></h1><h2 id="ğŸ“‹-è®¾è®¡ç›®æ ‡" tabindex="-1">ğŸ“‹ è®¾è®¡ç›®æ ‡ <a class="header-anchor" href="#ğŸ“‹-è®¾è®¡ç›®æ ‡" aria-label="Permalink to &quot;ğŸ“‹ è®¾è®¡ç›®æ ‡&quot;">â€‹</a></h2><p>å°†åŸæœ‰çš„åˆ†ç¦»å¼æƒé™ç®¡ç†ï¼ˆèœå• + æƒé™ï¼‰ç»Ÿä¸€ä¸ºä¸€ä¸ª<strong>æ ‘å½¢æƒé™è¡¨</strong>ï¼Œé€šè¿‡ <code>type</code> å­—æ®µåŒºåˆ†ä¸åŒç±»å‹çš„æƒé™èŠ‚ç‚¹ã€‚</p><h2 id="ğŸ¯-æ ¸å¿ƒä¼˜åŠ¿" tabindex="-1">ğŸ¯ æ ¸å¿ƒä¼˜åŠ¿ <a class="header-anchor" href="#ğŸ¯-æ ¸å¿ƒä¼˜åŠ¿" aria-label="Permalink to &quot;ğŸ¯ æ ¸å¿ƒä¼˜åŠ¿&quot;">â€‹</a></h2><h3 id="åŸæœ‰è®¾è®¡çš„é—®é¢˜" tabindex="-1">åŸæœ‰è®¾è®¡çš„é—®é¢˜ <a class="header-anchor" href="#åŸæœ‰è®¾è®¡çš„é—®é¢˜" aria-label="Permalink to &quot;åŸæœ‰è®¾è®¡çš„é—®é¢˜&quot;">â€‹</a></h3><ul><li>âŒ èœå•å’Œæƒé™åˆ†ç¦»ï¼Œç®¡ç†å¤æ‚</li><li>âŒ æ— æ³•ç›´æ¥è¡¨è¾¾&quot;èœå•ä¸‹çš„æŒ‰é’®&quot;è¿™ç§å±‚çº§å…³ç³»</li><li>âŒ API æƒé™å’Œèœå•æƒé™å‰²è£‚</li><li>âŒ éœ€è¦ç»´æŠ¤ä¸¤å¥—æ•°æ®ç»“æ„</li></ul><h3 id="æ–°è®¾è®¡çš„ä¼˜åŠ¿" tabindex="-1">æ–°è®¾è®¡çš„ä¼˜åŠ¿ <a class="header-anchor" href="#æ–°è®¾è®¡çš„ä¼˜åŠ¿" aria-label="Permalink to &quot;æ–°è®¾è®¡çš„ä¼˜åŠ¿&quot;">â€‹</a></h3><ul><li>âœ… ç»Ÿä¸€ç®¡ç†ï¼šèœå•ã€æŒ‰é’®ã€API æ¥å£éƒ½æ˜¯æƒé™èŠ‚ç‚¹</li><li>âœ… æ ‘å½¢ç»“æ„ï¼šå¤©ç„¶è¡¨è¾¾å±‚çº§å…³ç³»ï¼ˆèœå• â†’ æŒ‰é’® â†’ APIï¼‰</li><li>âœ… çµæ´»æ‰©å±•ï¼šå¯ä»¥è½»æ¾æ·»åŠ æ–°çš„æƒé™ç±»å‹</li><li>âœ… å‰åç«¯ä¸€è‡´ï¼šå‰ç«¯ç›´æ¥ä½¿ç”¨æƒé™æ ‘æ¸²æŸ“èœå•å’Œæ§åˆ¶æŒ‰é’®</li></ul><h2 id="ğŸ—„ï¸-æ–°çš„æ•°æ®æ¨¡å‹" tabindex="-1">ğŸ—„ï¸ æ–°çš„æ•°æ®æ¨¡å‹ <a class="header-anchor" href="#ğŸ—„ï¸-æ–°çš„æ•°æ®æ¨¡å‹" aria-label="Permalink to &quot;ğŸ—„ï¸ æ–°çš„æ•°æ®æ¨¡å‹&quot;">â€‹</a></h2><h3 id="æƒé™è¡¨ç»“æ„" tabindex="-1">æƒé™è¡¨ç»“æ„ <a class="header-anchor" href="#æƒé™è¡¨ç»“æ„" aria-label="Permalink to &quot;æƒé™è¡¨ç»“æ„&quot;">â€‹</a></h3><div class="language-prisma vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">prisma</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// ç»Ÿä¸€æƒé™æ¨¡å‹ï¼ˆèœå• + æŒ‰é’® + APIï¼‰</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">model</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> Permission</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  id              </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">String</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">       @id</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> @default</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">uuid</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">())</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">  // ========== åŸºç¡€å­—æ®µ ==========</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  code            </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">String</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">       @unique</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">              // æƒé™ä»£ç ï¼ˆå”¯ä¸€æ ‡è¯†ï¼‰</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  name            </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">String</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">                            // æƒé™åç§°</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  description     </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">String</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">?</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">                           // æƒé™æè¿°</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  type            </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">PermissionType</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">                    // æƒé™ç±»å‹</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">  // ========== æ ‘å½¢ç»“æ„ ==========</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  parentId        </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">String</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">?</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">      @map</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;parent_id&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)    </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// çˆ¶æƒé™ID</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  parent          </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">Permission</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">?</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">  @relation</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;PermissionHierarchy&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">fields</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: [</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">parentId</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">], </span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">references</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: [</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">id</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">], </span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">onDelete</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">Cascade</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  children        </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">Permission</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">[]</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> @relation</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;PermissionHierarchy&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">  // ========== èœå•ä¸“ç”¨å­—æ®µ ==========</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  routePath       </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">String</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">?</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">      @map</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;route_path&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)   </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// è·¯ç”±è·¯å¾„ï¼ˆèœå•ç±»å‹ä¸“ç”¨ï¼‰</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  component       </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">String</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">?</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">                           // ç»„ä»¶è·¯å¾„ï¼ˆèœå•ç±»å‹ä¸“ç”¨ï¼‰</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  icon            </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">String</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">?</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">                           // å›¾æ ‡ï¼ˆèœå•/æŒ‰é’®ç±»å‹ï¼‰</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  i18nKey         </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">String</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">?</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">      @map</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;i18n_key&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)     </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// å›½é™…åŒ–key</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">  // ========== APIä¸“ç”¨å­—æ®µ ==========</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  apiPath         </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">String</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">?</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">      @map</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;api_path&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)     </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// APIè·¯å¾„ï¼ˆå¦‚ /api/usersï¼‰</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  method          </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">HttpMethod</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">?</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">                       // HTTPæ–¹æ³•ï¼ˆGET, POST, PUT, DELETEï¼‰</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">  // ========== æ˜¾ç¤ºæ§åˆ¶ ==========</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  sort            </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">Int</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">          @default</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">0</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)          </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// æ’åº</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  visible         </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">Boolean</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">      @default</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">true</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)       </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// æ˜¯å¦å¯è§</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  status          </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">Int</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">          @default</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">1</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)          </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// çŠ¶æ€ï¼ˆ1:å¯ç”¨ 2:ç¦ç”¨ï¼‰</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">  // ========== ç³»ç»Ÿå­—æ®µ ==========</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  isSystem        </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">Boolean</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">      @default</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">false</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) </span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">@map</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;is_system&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  createdAt       </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">DateTime</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">     @default</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">now</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">()) </span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">@map</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;created_at&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  updatedAt       </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">DateTime</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">     @updatedAt</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> @map</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;updated_at&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  rolePermissions </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">RolePermission</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">[]</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">  @@map</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;permissions&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// æƒé™ç±»å‹æšä¸¾</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">enum</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> PermissionType</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  MENU     </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// èœå•ï¼ˆä¸€çº§ã€äºŒçº§ç­‰èœå•ï¼‰</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  BUTTON   </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// æŒ‰é’®ï¼ˆé¡µé¢å†…çš„æ“ä½œæŒ‰é’®ï¼‰</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  API      </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// APIæ¥å£ï¼ˆåç«¯æ¥å£æƒé™ï¼‰</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// HTTPæ–¹æ³•æšä¸¾ï¼ˆä»…APIç±»å‹ä½¿ç”¨ï¼‰</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">enum</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> HttpMethod</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  GET</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  POST</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  PUT</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  PATCH</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  DELETE</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span></code></pre></div><h3 id="æƒé™æ ‘ç¤ºä¾‹" tabindex="-1">æƒé™æ ‘ç¤ºä¾‹ <a class="header-anchor" href="#æƒé™æ ‘ç¤ºä¾‹" aria-label="Permalink to &quot;æƒé™æ ‘ç¤ºä¾‹&quot;">â€‹</a></h3><div class="language- vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span>ç”¨æˆ·ç®¡ç†ï¼ˆMENUï¼‰</span></span>
<span class="line"><span>â”œâ”€ ç”¨æˆ·åˆ—è¡¨ï¼ˆMENUï¼‰</span></span>
<span class="line"><span>â”‚  â”œâ”€ æ–°å»ºç”¨æˆ·æŒ‰é’®ï¼ˆBUTTONï¼‰</span></span>
<span class="line"><span>â”‚  â”‚  â””â”€ POST /api/usersï¼ˆAPIï¼‰</span></span>
<span class="line"><span>â”‚  â”œâ”€ ç¼–è¾‘ç”¨æˆ·æŒ‰é’®ï¼ˆBUTTONï¼‰</span></span>
<span class="line"><span>â”‚  â”‚  â”œâ”€ GET /api/users/:idï¼ˆAPIï¼‰</span></span>
<span class="line"><span>â”‚  â”‚  â””â”€ PATCH /api/users/:idï¼ˆAPIï¼‰</span></span>
<span class="line"><span>â”‚  â”œâ”€ åˆ é™¤ç”¨æˆ·æŒ‰é’®ï¼ˆBUTTONï¼‰</span></span>
<span class="line"><span>â”‚  â”‚  â””â”€ DELETE /api/users/:idï¼ˆAPIï¼‰</span></span>
<span class="line"><span>â”‚  â””â”€ å¯¼å‡ºç”¨æˆ·æŒ‰é’®ï¼ˆBUTTONï¼‰</span></span>
<span class="line"><span>â”‚     â””â”€ GET /api/users/exportï¼ˆAPIï¼‰</span></span>
<span class="line"><span>â”œâ”€ è§’è‰²ç®¡ç†ï¼ˆMENUï¼‰</span></span>
<span class="line"><span>â”‚  â”œâ”€ åˆ†é…æƒé™æŒ‰é’®ï¼ˆBUTTONï¼‰</span></span>
<span class="line"><span>â”‚  â”‚  â””â”€ POST /api/roles/:id/permissionsï¼ˆAPIï¼‰</span></span>
<span class="line"><span>â”‚  â””â”€ æŸ¥çœ‹æƒé™æŒ‰é’®ï¼ˆBUTTONï¼‰</span></span>
<span class="line"><span>â”‚     â””â”€ GET /api/roles/:id/permissionsï¼ˆAPIï¼‰</span></span></code></pre></div><h3 id="æ•°æ®ç¤ºä¾‹" tabindex="-1">æ•°æ®ç¤ºä¾‹ <a class="header-anchor" href="#æ•°æ®ç¤ºä¾‹" aria-label="Permalink to &quot;æ•°æ®ç¤ºä¾‹&quot;">â€‹</a></h3><table tabindex="0"><thead><tr><th>id</th><th>code</th><th>name</th><th>type</th><th>parentId</th><th>routePath</th><th>apiPath</th><th>method</th><th>sort</th><th>visible</th></tr></thead><tbody><tr><td>1</td><td>user-management</td><td>ç”¨æˆ·ç®¡ç†</td><td>MENU</td><td>null</td><td>/user-management</td><td>null</td><td>null</td><td>1</td><td>true</td></tr><tr><td>2</td><td>user-list</td><td>ç”¨æˆ·åˆ—è¡¨</td><td>MENU</td><td>1</td><td>/user-management/list</td><td>null</td><td>null</td><td>1</td><td>true</td></tr><tr><td>3</td><td>user-create-btn</td><td>æ–°å»ºç”¨æˆ·</td><td>BUTTON</td><td>2</td><td>null</td><td>null</td><td>null</td><td>1</td><td>true</td></tr><tr><td>4</td><td>user-create-api</td><td>åˆ›å»ºç”¨æˆ·æ¥å£</td><td>API</td><td>3</td><td>null</td><td>/api/users</td><td>POST</td><td>1</td><td>false</td></tr><tr><td>5</td><td>user-edit-btn</td><td>ç¼–è¾‘ç”¨æˆ·</td><td>BUTTON</td><td>2</td><td>null</td><td>null</td><td>null</td><td>2</td><td>true</td></tr><tr><td>6</td><td>user-edit-get-api</td><td>è·å–ç”¨æˆ·æ¥å£</td><td>API</td><td>5</td><td>null</td><td>/api/users/:id</td><td>GET</td><td>1</td><td>false</td></tr><tr><td>7</td><td>user-edit-update-api</td><td>æ›´æ–°ç”¨æˆ·æ¥å£</td><td>API</td><td>5</td><td>null</td><td>/api/users/:id</td><td>PATCH</td><td>2</td><td>false</td></tr></tbody></table><h2 id="ğŸ”„-è§’è‰²æƒé™å…³è”" tabindex="-1">ğŸ”„ è§’è‰²æƒé™å…³è” <a class="header-anchor" href="#ğŸ”„-è§’è‰²æƒé™å…³è”" aria-label="Permalink to &quot;ğŸ”„ è§’è‰²æƒé™å…³è”&quot;">â€‹</a></h2><p>ä¿æŒåŸæœ‰çš„ <code>RolePermission</code> å…³è”è¡¨ä¸å˜ï¼š</p><div class="language-prisma vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">prisma</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">model</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> RolePermission</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  id           </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">String</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">     @id</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> @default</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">uuid</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">())</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  roleId       </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">String</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">     @map</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;role_id&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  permissionId </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">String</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">     @map</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;permission_id&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  role         </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">Role</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">       @relation</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(...)</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  permission   </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">Permission</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> @relation</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(...)</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  createdAt    </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">DateTime</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">   @default</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">now</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">())</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">  @@unique</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">([</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">roleId</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">permissionId</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">])</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">  @@map</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;role_permissions&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span></code></pre></div><h2 id="ğŸ¨-å‰ç«¯ä½¿ç”¨åœºæ™¯" tabindex="-1">ğŸ¨ å‰ç«¯ä½¿ç”¨åœºæ™¯ <a class="header-anchor" href="#ğŸ¨-å‰ç«¯ä½¿ç”¨åœºæ™¯" aria-label="Permalink to &quot;ğŸ¨ å‰ç«¯ä½¿ç”¨åœºæ™¯&quot;">â€‹</a></h2><h3 id="_1-æ¸²æŸ“èœå•" tabindex="-1">1. æ¸²æŸ“èœå• <a class="header-anchor" href="#_1-æ¸²æŸ“èœå•" aria-label="Permalink to &quot;1. æ¸²æŸ“èœå•&quot;">â€‹</a></h3><div class="language-typescript vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">typescript</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// è·å–å½“å‰ç”¨æˆ·çš„æ‰€æœ‰æƒé™</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> permissions</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> await</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> fetchUserPermissions</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">();</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// ç­›é€‰èœå•ç±»å‹çš„æƒé™</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> menuPermissions</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> permissions.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">filter</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">p</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> p.type </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">===</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &#39;MENU&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// æ„å»ºæ ‘å½¢èœå•</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> menuTree</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> buildTree</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(menuPermissions);</span></span></code></pre></div><h3 id="_2-æ§åˆ¶æŒ‰é’®æ˜¾ç¤º" tabindex="-1">2. æ§åˆ¶æŒ‰é’®æ˜¾ç¤º <a class="header-anchor" href="#_2-æ§åˆ¶æŒ‰é’®æ˜¾ç¤º" aria-label="Permalink to &quot;2. æ§åˆ¶æŒ‰é’®æ˜¾ç¤º&quot;">â€‹</a></h3><div class="language-vue vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">vue</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&lt;</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">template</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  &lt;</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">div</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">    &lt;!-- åªæœ‰æ‹¥æœ‰ user-create-btn æƒé™æ‰æ˜¾ç¤ºæ–°å»ºæŒ‰é’® --&gt;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    &lt;</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">button</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> v-if</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;hasPermission(&#39;user-create-btn&#39;)&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">      æ–°å»ºç”¨æˆ·</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    &lt;/</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">button</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">    &lt;!-- åªæœ‰æ‹¥æœ‰ user-edit-btn æƒé™æ‰æ˜¾ç¤ºç¼–è¾‘æŒ‰é’® --&gt;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    &lt;</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">button</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> v-if</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;hasPermission(&#39;user-edit-btn&#39;)&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">      ç¼–è¾‘ç”¨æˆ·</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    &lt;/</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">button</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  &lt;/</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">div</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&lt;/</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">template</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&lt;</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">script</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> setup</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> { usePermission } </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">from</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &#39;@/hooks/usePermission&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">const</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> { </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">hasPermission</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> } </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> usePermission</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">();</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&lt;/</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">script</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;</span></span></code></pre></div><h3 id="_3-api-æƒé™éªŒè¯" tabindex="-1">3. API æƒé™éªŒè¯ <a class="header-anchor" href="#_3-api-æƒé™éªŒè¯" aria-label="Permalink to &quot;3. API æƒé™éªŒè¯&quot;">â€‹</a></h3><p>åç«¯é€šè¿‡æƒé™å®ˆå«éªŒè¯ï¼š</p><div class="language-typescript vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">typescript</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// è£…é¥°å™¨æ£€æŸ¥æŒ‰é’®æƒé™ï¼ˆä¼šè‡ªåŠ¨æ£€æŸ¥å…¶ä¸‹çš„ API æƒé™ï¼‰</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">@</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">RequirePermissions</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;user-create-btn&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">@</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">Post</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">()</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">createUser</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(@</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">Body</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">() dto: CreateUserDto) {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">  return</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> this</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">.usersService.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">create</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(dto);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span></code></pre></div><h2 id="ğŸ“Š-æƒé™ç»§æ‰¿è§„åˆ™" tabindex="-1">ğŸ“Š æƒé™ç»§æ‰¿è§„åˆ™ <a class="header-anchor" href="#ğŸ“Š-æƒé™ç»§æ‰¿è§„åˆ™" aria-label="Permalink to &quot;ğŸ“Š æƒé™ç»§æ‰¿è§„åˆ™&quot;">â€‹</a></h2><h3 id="è§„åˆ™è¯´æ˜" tabindex="-1">è§„åˆ™è¯´æ˜ <a class="header-anchor" href="#è§„åˆ™è¯´æ˜" aria-label="Permalink to &quot;è§„åˆ™è¯´æ˜&quot;">â€‹</a></h3><ol><li><p><strong>æˆäºˆçˆ¶æƒé™ â†’ è‡ªåŠ¨æ‹¥æœ‰æ‰€æœ‰å­æƒé™</strong></p><ul><li>ä¾‹å¦‚ï¼šæˆäºˆ&quot;ç”¨æˆ·ç®¡ç†&quot;èœå• â†’ è‡ªåŠ¨æ‹¥æœ‰&quot;ç”¨æˆ·åˆ—è¡¨&quot;ã€&quot;æ–°å»ºç”¨æˆ·&quot;ç­‰æ‰€æœ‰å­æƒé™</li></ul></li><li><p><strong>æˆäºˆæŒ‰é’®æƒé™ â†’ è‡ªåŠ¨æ‹¥æœ‰å…¶ä¸‹çš„ API æƒé™</strong></p><ul><li>ä¾‹å¦‚ï¼šæˆäºˆ&quot;æ–°å»ºç”¨æˆ·æŒ‰é’®&quot; â†’ è‡ªåŠ¨æ‹¥æœ‰&quot;POST /api/users&quot;æ¥å£æƒé™</li></ul></li><li><p><strong>å¯ä»¥å•ç‹¬æˆäºˆ API æƒé™ï¼ˆç”¨äºç¬¬ä¸‰æ–¹è°ƒç”¨ï¼‰</strong></p><ul><li>ä¾‹å¦‚ï¼šæŸä¸ªå¤–éƒ¨ç³»ç»Ÿåªéœ€è¦&quot;GET /api/users&quot;æ¥å£æƒé™ï¼Œä¸éœ€è¦èœå•å’ŒæŒ‰é’®</li></ul></li></ol><h3 id="æƒé™æ£€æŸ¥é€»è¾‘" tabindex="-1">æƒé™æ£€æŸ¥é€»è¾‘ <a class="header-anchor" href="#æƒé™æ£€æŸ¥é€»è¾‘" aria-label="Permalink to &quot;æƒé™æ£€æŸ¥é€»è¾‘&quot;">â€‹</a></h3><div class="language-typescript vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">typescript</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">/**</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"> * æ£€æŸ¥ç”¨æˆ·æ˜¯å¦æ‹¥æœ‰æŒ‡å®šæƒé™</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"> * </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">@param</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> userId</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"> ç”¨æˆ·ID</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"> * </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">@param</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> permissionCode</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"> æƒé™ä»£ç </span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"> * </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">@returns</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"> boolean</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"> */</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">async</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> function</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> checkPermission</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">userId</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">:</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> string</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">permissionCode</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">:</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> string</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">:</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> Promise</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&lt;</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">boolean</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt; {</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">  // 1. è·å–ç”¨æˆ·çš„æ‰€æœ‰æƒé™ï¼ˆåŒ…æ‹¬é€šè¿‡è§’è‰²è·å¾—çš„æƒé™ï¼‰</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">  const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> userPermissions</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> await</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> getUserPermissions</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(userId);</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">  // 2. ç›´æ¥æ‹¥æœ‰è¯¥æƒé™</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">  if</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (userPermissions.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">includes</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(permissionCode)) {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    return</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> true</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  }</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">  // 3. æ£€æŸ¥æ˜¯å¦æ‹¥æœ‰çˆ¶æƒé™ï¼ˆé€’å½’å‘ä¸ŠæŸ¥æ‰¾ï¼‰</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">  const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> permission</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> await</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> findPermissionByCode</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(permissionCode);</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">  if</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (permission.parentId) {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    return</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> checkPermission</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(userId, permission.parent.code);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  }</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">  return</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> false</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span></code></pre></div><h2 id="ğŸ”§-å®ç°æ­¥éª¤" tabindex="-1">ğŸ”§ å®ç°æ­¥éª¤ <a class="header-anchor" href="#ğŸ”§-å®ç°æ­¥éª¤" aria-label="Permalink to &quot;ğŸ”§ å®ç°æ­¥éª¤&quot;">â€‹</a></h2><h3 id="é˜¶æ®µä¸€-æ•°æ®åº“è¿ç§»-ä¿ç•™ç°æœ‰æ•°æ®" tabindex="-1">é˜¶æ®µä¸€ï¼šæ•°æ®åº“è¿ç§»ï¼ˆä¿ç•™ç°æœ‰æ•°æ®ï¼‰ <a class="header-anchor" href="#é˜¶æ®µä¸€-æ•°æ®åº“è¿ç§»-ä¿ç•™ç°æœ‰æ•°æ®" aria-label="Permalink to &quot;é˜¶æ®µä¸€ï¼šæ•°æ®åº“è¿ç§»ï¼ˆä¿ç•™ç°æœ‰æ•°æ®ï¼‰&quot;">â€‹</a></h3><ol><li>âœ… åˆ›å»ºæ–°çš„æƒé™è¡¨ç»“æ„</li><li>âœ… å°†ç°æœ‰èœå•æ•°æ®è¿ç§»åˆ°æƒé™è¡¨ï¼ˆtype=MENUï¼‰</li><li>âœ… å°†ç°æœ‰æƒé™æ•°æ®è¿ç§»åˆ°æƒé™è¡¨ï¼ˆtype=APIï¼‰</li><li>âœ… ä¿ç•™æ—§è¡¨ï¼Œç¡®ä¿æ•°æ®å®‰å…¨</li></ol><h3 id="é˜¶æ®µäºŒ-service-å±‚æ”¹é€ " tabindex="-1">é˜¶æ®µäºŒï¼šService å±‚æ”¹é€  <a class="header-anchor" href="#é˜¶æ®µäºŒ-service-å±‚æ”¹é€ " aria-label="Permalink to &quot;é˜¶æ®µäºŒï¼šService å±‚æ”¹é€ &quot;">â€‹</a></h3><ol><li>âœ… åˆ›å»º PermissionsServiceï¼ˆæ”¯æŒæ ‘å½¢æŸ¥è¯¢ï¼‰</li><li>âœ… å®ç°æƒé™ç»§æ‰¿é€»è¾‘</li><li>âœ… å®ç°æƒé™æ£€æŸ¥å®ˆå«</li></ol><h3 id="é˜¶æ®µä¸‰-controller-å±‚æ”¹é€ " tabindex="-1">é˜¶æ®µä¸‰ï¼šController å±‚æ”¹é€  <a class="header-anchor" href="#é˜¶æ®µä¸‰-controller-å±‚æ”¹é€ " aria-label="Permalink to &quot;é˜¶æ®µä¸‰ï¼šController å±‚æ”¹é€ &quot;">â€‹</a></h3><ol><li>âœ… æä¾›æƒé™æ ‘æŸ¥è¯¢æ¥å£</li><li>âœ… æä¾›æŒ‰ç±»å‹ç­›é€‰æ¥å£</li><li>âœ… æä¾›æƒé™ç»§æ‰¿å…³ç³»æŸ¥è¯¢æ¥å£</li></ol><h3 id="é˜¶æ®µå››-å‰ç«¯é›†æˆ" tabindex="-1">é˜¶æ®µå››ï¼šå‰ç«¯é›†æˆ <a class="header-anchor" href="#é˜¶æ®µå››-å‰ç«¯é›†æˆ" aria-label="Permalink to &quot;é˜¶æ®µå››ï¼šå‰ç«¯é›†æˆ&quot;">â€‹</a></h3><ol><li>âœ… æä¾›å‰ç«¯æƒé™åˆ¤æ–­å·¥å…·å‡½æ•°</li><li>âœ… æä¾›èœå•æ¸²æŸ“å·¥å…·</li><li>âœ… æä¾›æŒ‰é’®æƒé™æŒ‡ä»¤</li></ol><h2 id="ğŸš€-api-è®¾è®¡" tabindex="-1">ğŸš€ API è®¾è®¡ <a class="header-anchor" href="#ğŸš€-api-è®¾è®¡" aria-label="Permalink to &quot;ğŸš€ API è®¾è®¡&quot;">â€‹</a></h2><h3 id="è·å–æƒé™æ ‘" tabindex="-1">è·å–æƒé™æ ‘ <a class="header-anchor" href="#è·å–æƒé™æ ‘" aria-label="Permalink to &quot;è·å–æƒé™æ ‘&quot;">â€‹</a></h3><div class="language-http vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">http</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">GET</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> /api/permissions/tree</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">Authorization</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">:</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> Bearer &lt;token&gt;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">Response</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">:</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">{</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">  &quot;code&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">0</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">  &quot;success&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">true</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">  &quot;data&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: [</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    {</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">      &quot;id&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;1&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">      &quot;code&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;user-management&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">      &quot;name&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;ç”¨æˆ·ç®¡ç†&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">      &quot;type&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;MENU&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">      &quot;icon&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;mdi:account-group&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">      &quot;sort&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">1</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">      &quot;children&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: [</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        {</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">          &quot;id&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;2&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">          &quot;code&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;user-list&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">          &quot;name&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;ç”¨æˆ·åˆ—è¡¨&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">          &quot;type&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;MENU&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">          &quot;routePath&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;/user-management/list&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">          &quot;children&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: [</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">            {</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">              &quot;id&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;3&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">              &quot;code&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;user-create-btn&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">              &quot;name&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;æ–°å»ºç”¨æˆ·&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">              &quot;type&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;BUTTON&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">              &quot;children&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: [</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">                {</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">                  &quot;id&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;4&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">                  &quot;code&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;user-create-api&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">                  &quot;name&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;åˆ›å»ºç”¨æˆ·æ¥å£&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">                  &quot;type&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;API&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">                  &quot;apiPath&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;/api/users&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">                  &quot;method&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;POST&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">                  &quot;visible&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">false</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">                }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">              ]</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">            }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">          ]</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">      ]</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  ]</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span></code></pre></div><h3 id="æŒ‰ç±»å‹è·å–æƒé™" tabindex="-1">æŒ‰ç±»å‹è·å–æƒé™ <a class="header-anchor" href="#æŒ‰ç±»å‹è·å–æƒé™" aria-label="Permalink to &quot;æŒ‰ç±»å‹è·å–æƒé™&quot;">â€‹</a></h3><div class="language-http vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">http</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">GET</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> /api/permissions?type=MENU</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">GET</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> /api/permissions?type=BUTTON</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">GET</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> /api/permissions?type=API</span></span></code></pre></div><h3 id="è·å–å½“å‰ç”¨æˆ·çš„æƒé™æ ‘" tabindex="-1">è·å–å½“å‰ç”¨æˆ·çš„æƒé™æ ‘ <a class="header-anchor" href="#è·å–å½“å‰ç”¨æˆ·çš„æƒé™æ ‘" aria-label="Permalink to &quot;è·å–å½“å‰ç”¨æˆ·çš„æƒé™æ ‘&quot;">â€‹</a></h3><div class="language-http vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">http</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">GET</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> /api/auth/permissions-tree</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">Authorization</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">:</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> Bearer &lt;token&gt;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">Response</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">:</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> è¿”å›ç”¨æˆ·æœ‰æƒè®¿é—®çš„æƒé™æ ‘ï¼ˆè‡ªåŠ¨è¿‡æ»¤æ— æƒé™çš„èŠ‚ç‚¹ï¼‰</span></span></code></pre></div><h2 id="ğŸ“-å‘½åè§„èŒƒ" tabindex="-1">ğŸ“ å‘½åè§„èŒƒ <a class="header-anchor" href="#ğŸ“-å‘½åè§„èŒƒ" aria-label="Permalink to &quot;ğŸ“ å‘½åè§„èŒƒ&quot;">â€‹</a></h2><h3 id="æƒé™-code-å‘½åè§„èŒƒ" tabindex="-1">æƒé™ Code å‘½åè§„èŒƒ <a class="header-anchor" href="#æƒé™-code-å‘½åè§„èŒƒ" aria-label="Permalink to &quot;æƒé™ Code å‘½åè§„èŒƒ&quot;">â€‹</a></h3><table tabindex="0"><thead><tr><th>ç±»å‹</th><th>æ ¼å¼</th><th>ç¤ºä¾‹</th></tr></thead><tbody><tr><td>èœå•ï¼ˆMENUï¼‰</td><td><code>{module}-{page}</code></td><td><code>user-management</code>, <code>user-list</code></td></tr><tr><td>æŒ‰é’®ï¼ˆBUTTONï¼‰</td><td><code>{module}-{action}-btn</code></td><td><code>user-create-btn</code>, <code>user-edit-btn</code></td></tr><tr><td>APIï¼ˆAPIï¼‰</td><td><code>{module}-{action}-api</code></td><td><code>user-create-api</code>, <code>user-update-api</code></td></tr></tbody></table><h3 id="ç‰¹æ®Šåœºæ™¯" tabindex="-1">ç‰¹æ®Šåœºæ™¯ <a class="header-anchor" href="#ç‰¹æ®Šåœºæ™¯" aria-label="Permalink to &quot;ç‰¹æ®Šåœºæ™¯&quot;">â€‹</a></h3><ul><li>ç›®å½•èœå•ï¼š<code>{module}</code>ï¼ˆå¦‚ <code>system</code>ï¼‰</li><li>é¡µé¢èœå•ï¼š<code>{module}-{page}</code>ï¼ˆå¦‚ <code>system-settings</code>ï¼‰</li><li>å¤šçº§èœå•ï¼š<code>{module}-{sub}-{page}</code>ï¼ˆå¦‚ <code>system-log-access</code>ï¼‰</li></ul><h2 id="ğŸ¯-æœ€ä½³å®è·µ" tabindex="-1">ğŸ¯ æœ€ä½³å®è·µ <a class="header-anchor" href="#ğŸ¯-æœ€ä½³å®è·µ" aria-label="Permalink to &quot;ğŸ¯ æœ€ä½³å®è·µ&quot;">â€‹</a></h2><h3 id="_1-æƒé™ç²’åº¦" tabindex="-1">1. æƒé™ç²’åº¦ <a class="header-anchor" href="#_1-æƒé™ç²’åº¦" aria-label="Permalink to &quot;1. æƒé™ç²’åº¦&quot;">â€‹</a></h3><ul><li>âœ… <strong>èœå•çº§åˆ«</strong>ï¼šæ§åˆ¶ç”¨æˆ·èƒ½çœ‹åˆ°å“ªäº›é¡µé¢</li><li>âœ… <strong>æŒ‰é’®çº§åˆ«</strong>ï¼šæ§åˆ¶ç”¨æˆ·èƒ½æ‰§è¡Œå“ªäº›æ“ä½œ</li><li>âœ… <strong>APIçº§åˆ«</strong>ï¼šåç«¯æ¥å£æƒé™éªŒè¯</li></ul><h3 id="_2-æƒé™è®¾è®¡åŸåˆ™" tabindex="-1">2. æƒé™è®¾è®¡åŸåˆ™ <a class="header-anchor" href="#_2-æƒé™è®¾è®¡åŸåˆ™" aria-label="Permalink to &quot;2. æƒé™è®¾è®¡åŸåˆ™&quot;">â€‹</a></h3><ul><li><strong>æœ€å°æƒé™åŸåˆ™</strong>ï¼šé»˜è®¤æ— æƒé™ï¼Œæ˜¾å¼æˆæƒ</li><li><strong>èŒè´£åˆ†ç¦»</strong>ï¼šä¸åŒè§’è‰²æ‹¥æœ‰ä¸åŒæƒé™ç»„åˆ</li><li><strong>ç»§æ‰¿å…³ç³»</strong>ï¼šåˆç†ä½¿ç”¨çˆ¶å­å…³ç³»å‡å°‘é…ç½®</li></ul><h3 id="_3-æ€§èƒ½ä¼˜åŒ–" tabindex="-1">3. æ€§èƒ½ä¼˜åŒ– <a class="header-anchor" href="#_3-æ€§èƒ½ä¼˜åŒ–" aria-label="Permalink to &quot;3. æ€§èƒ½ä¼˜åŒ–&quot;">â€‹</a></h3><ul><li>æƒé™æ•°æ®ç¼“å­˜ï¼ˆRedisï¼‰</li><li>æƒé™æ ‘æ‡’åŠ è½½</li><li>ç”¨æˆ·æƒé™é¢„è®¡ç®—</li></ul><h2 id="âš ï¸-æ³¨æ„äº‹é¡¹" tabindex="-1">âš ï¸ æ³¨æ„äº‹é¡¹ <a class="header-anchor" href="#âš ï¸-æ³¨æ„äº‹é¡¹" aria-label="Permalink to &quot;âš ï¸ æ³¨æ„äº‹é¡¹&quot;">â€‹</a></h2><h3 id="æ•°æ®è¿ç§»" tabindex="-1">æ•°æ®è¿ç§» <a class="header-anchor" href="#æ•°æ®è¿ç§»" aria-label="Permalink to &quot;æ•°æ®è¿ç§»&quot;">â€‹</a></h3><ol><li><strong>ä¸åˆ é™¤æ—§è¡¨</strong>ï¼šå…ˆåˆ›å»ºæ–°è¡¨ï¼Œè¿ç§»æ•°æ®åå†åˆ é™¤</li><li><strong>æ•°æ®æ˜ å°„</strong>ï¼š <ul><li>æ—§ <code>Menu</code> è¡¨ â†’ æ–° <code>Permission</code> è¡¨ï¼ˆtype=MENUï¼‰</li><li>æ—§ <code>Permission</code> è¡¨ â†’ æ–° <code>Permission</code> è¡¨ï¼ˆtype=APIï¼‰</li><li>æ—§ <code>RoleMenu</code> è¡¨ â†’ æ–° <code>RolePermission</code> è¡¨</li><li>æ—§ <code>RolePermission</code> è¡¨ â†’ æ–° <code>RolePermission</code> è¡¨</li></ul></li></ol><h3 id="å…¼å®¹æ€§" tabindex="-1">å…¼å®¹æ€§ <a class="header-anchor" href="#å…¼å®¹æ€§" aria-label="Permalink to &quot;å…¼å®¹æ€§&quot;">â€‹</a></h3><ul><li>ä¿æŒ API æ¥å£å‘åå…¼å®¹</li><li>æä¾›æ•°æ®è¿ç§»è„šæœ¬</li><li>é€æ­¥åºŸå¼ƒæ—§æ¥å£</li></ul><h2 id="ğŸ“…-å®æ–½è®¡åˆ’" tabindex="-1">ğŸ“… å®æ–½è®¡åˆ’ <a class="header-anchor" href="#ğŸ“…-å®æ–½è®¡åˆ’" aria-label="Permalink to &quot;ğŸ“… å®æ–½è®¡åˆ’&quot;">â€‹</a></h2><table tabindex="0"><thead><tr><th>é˜¶æ®µ</th><th>ä»»åŠ¡</th><th>é¢„è®¡æ—¶é—´</th></tr></thead><tbody><tr><td>1</td><td>è®¾è®¡è¯„å®¡</td><td>1 å¤©</td></tr><tr><td>2</td><td>Prisma Schema æ›´æ–°</td><td>1 å¤©</td></tr><tr><td>3</td><td>æ•°æ®è¿ç§»è„šæœ¬</td><td>1 å¤©</td></tr><tr><td>4</td><td>Service å±‚æ”¹é€ </td><td>2 å¤©</td></tr><tr><td>5</td><td>Controller å±‚æ”¹é€ </td><td>1 å¤©</td></tr><tr><td>6</td><td>æµ‹è¯•</td><td>1 å¤©</td></tr><tr><td>7</td><td>æ–‡æ¡£æ›´æ–°</td><td>1 å¤©</td></tr><tr><td><strong>æ€»è®¡</strong></td><td><strong>å…¨éƒ¨</strong></td><td><strong>8 å¤©</strong></td></tr></tbody></table><hr><p><strong>è®¾è®¡ç‰ˆæœ¬</strong>: v2.0.0 <strong>è®¾è®¡æ—¥æœŸ</strong>: 2025-10-22 <strong>è®¾è®¡è€…</strong>: Claude Code</p>`,68)])])}const g=i(l,[["render",h]]);export{o as __pageData,g as default};
