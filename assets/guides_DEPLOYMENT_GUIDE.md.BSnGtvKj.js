import{_ as i,c as a,o as n,a0 as t}from"./chunks/framework.CHkYM5Ax.js";const g=JSON.parse('{"title":"部署指南","description":"","frontmatter":{},"headers":[],"relativePath":"guides/DEPLOYMENT_GUIDE.md","filePath":"guides/DEPLOYMENT_GUIDE.md","lastUpdated":1767087888000}'),e={name:"guides/DEPLOYMENT_GUIDE.md"};function l(h,s,p,k,r,d){return n(),a("div",null,[...s[0]||(s[0]=[t(`<h1 id="部署指南" tabindex="-1">部署指南 <a class="header-anchor" href="#部署指南" aria-label="Permalink to &quot;部署指南&quot;">​</a></h1><p>本文档提供 NestBase 项目的生产环境部署方案，包括 Docker 容器化部署、PM2 传统部署以及 Nginx 反向代理配置。</p><h2 id="_1-部署架构" tabindex="-1">1. 部署架构 <a class="header-anchor" href="#_1-部署架构" aria-label="Permalink to &quot;1. 部署架构&quot;">​</a></h2><p>推荐的生产环境架构：</p><ul><li><strong>前端</strong>: 构建静态文件 -&gt; Nginx 托管 / CDN 分发</li><li><strong>后端</strong>: Docker 容器 / PM2 进程 -&gt; Nginx 反向代理</li><li><strong>数据库</strong>: 托管 PostgreSQL (Supabase/AWS RDS) 或 自建 Docker</li><li><strong>缓存</strong>: Redis (可选)</li></ul><h2 id="_2-后端部署" tabindex="-1">2. 后端部署 <a class="header-anchor" href="#_2-后端部署" aria-label="Permalink to &quot;2. 后端部署&quot;">​</a></h2><h3 id="a-docker-部署-推荐" tabindex="-1">A. Docker 部署 (推荐) <a class="header-anchor" href="#a-docker-部署-推荐" aria-label="Permalink to &quot;A. Docker 部署 (推荐)&quot;">​</a></h3><p>项目根目录已包含 <code>Dockerfile</code>。</p><ol><li><p><strong>构建镜像</strong></p><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">docker</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> build</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -t</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> nestbase-backend</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> .</span></span></code></pre></div></li><li><p><strong>启动容器</strong></p><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">docker</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> run</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -d</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> \\</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">  --name</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> nestbase-api</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> \\</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">  -p</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> 3000:3000</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> \\</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">  --env-file</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> apps/backend/.env</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> \\</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">  nestbase-backend</span></span></code></pre></div></li></ol><h3 id="b-pm2-部署" tabindex="-1">B. PM2 部署 <a class="header-anchor" href="#b-pm2-部署" aria-label="Permalink to &quot;B. PM2 部署&quot;">​</a></h3><p>适用于传统云服务器环境。</p><ol><li><p><strong>安装依赖与构建</strong></p><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">pnpm</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> install</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">pnpm</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> build:backend</span></span></code></pre></div></li><li><p><strong>启动进程</strong></p><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">cd</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> apps/backend</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">pm2</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> start</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> dist/main.js</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> --name</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &quot;nestbase-api&quot;</span></span></code></pre></div></li><li><p><strong>日志监控</strong></p><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">pm2</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> logs</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> nestbase-api</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">pm2</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> monit</span></span></code></pre></div></li></ol><h2 id="_3-前端部署" tabindex="-1">3. 前端部署 <a class="header-anchor" href="#_3-前端部署" aria-label="Permalink to &quot;3. 前端部署&quot;">​</a></h2><h3 id="构建静态资源" tabindex="-1">构建静态资源 <a class="header-anchor" href="#构建静态资源" aria-label="Permalink to &quot;构建静态资源&quot;">​</a></h3><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">pnpm</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> build:frontend</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># 构建产物位于 apps/frontend/dist</span></span></code></pre></div><h3 id="nginx-配置示例" tabindex="-1">Nginx 配置示例 <a class="header-anchor" href="#nginx-配置示例" aria-label="Permalink to &quot;Nginx 配置示例&quot;">​</a></h3><div class="language-nginx vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">nginx</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">server</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    listen </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">80</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    server_name </span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">your-domain.com;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">    # 前端静态资源</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    location</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> / </span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">{</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">        root </span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">/var/www/nestbase/dist;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">        index </span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">index.html;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">        try_files </span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">$uri $uri/ /index.html;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    }</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">    # 后端 API 代理</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    location</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> /api/ </span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">{</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">        proxy_pass </span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">http://localhost:3000/api/;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">        proxy_set_header </span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">Host $host;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">        proxy_set_header </span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">X-Real-IP $remote_addr;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span></code></pre></div><h2 id="_4-文档站点部署" tabindex="-1">4. 文档站点部署 <a class="header-anchor" href="#_4-文档站点部署" aria-label="Permalink to &quot;4. 文档站点部署&quot;">​</a></h2><p>文档站点基于 <a href="https://vitepress.dev/" target="_blank" rel="noreferrer">VitePress</a> 构建。</p><h3 id="构建静态资源-1" tabindex="-1">构建静态资源 <a class="header-anchor" href="#构建静态资源-1" aria-label="Permalink to &quot;构建静态资源&quot;">​</a></h3><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">pnpm</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> docs:build</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># 构建产物位于 docs/.vitepress/dist</span></span></code></pre></div><h3 id="nginx-配置示例-1" tabindex="-1">Nginx 配置示例 <a class="header-anchor" href="#nginx-配置示例-1" aria-label="Permalink to &quot;Nginx 配置示例&quot;">​</a></h3><div class="language-nginx vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">nginx</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">server</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    listen </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">80</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    server_name </span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">docs.your-domain.com;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    location</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> / </span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">{</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">        root </span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">/var/www/nestbase/docs/.vitepress/dist;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">        index </span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">index.html;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">        try_files </span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">$uri $uri/ </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">=404</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span></code></pre></div><h2 id="_5-环境变量检查清单" tabindex="-1">5. 环境变量检查清单 <a class="header-anchor" href="#_5-环境变量检查清单" aria-label="Permalink to &quot;5. 环境变量检查清单&quot;">​</a></h2><p>生产环境部署前，请务必检查以下变量：</p><table tabindex="0"><thead><tr><th style="text-align:left;">变量名</th><th style="text-align:left;">推荐值/说明</th></tr></thead><tbody><tr><td style="text-align:left;"><code>NODE_ENV</code></td><td style="text-align:left;"><code>production</code></td></tr><tr><td style="text-align:left;"><code>JWT_SECRET</code></td><td style="text-align:left;"><strong>必须</strong>修改为长随机字符串</td></tr><tr><td style="text-align:left;"><code>DATABASE_URL</code></td><td style="text-align:left;">使用连接池地址 (Transaction Mode)</td></tr><tr><td style="text-align:left;"><code>DIRECT_URL</code></td><td style="text-align:left;">使用直连地址 (Session Mode)</td></tr><tr><td style="text-align:left;"><code>CORS_ORIGIN</code></td><td style="text-align:left;">限制为前端域名，如 <code>https://your-domain.com</code></td></tr><tr><td style="text-align:left;"><code>SWAGGER_ENABLE</code></td><td style="text-align:left;">生产环境建议设为 <code>false</code> 关闭文档</td></tr></tbody></table><h2 id="_5-常见问题" tabindex="-1">5. 常见问题 <a class="header-anchor" href="#_5-常见问题" aria-label="Permalink to &quot;5. 常见问题&quot;">​</a></h2><p><strong>Q: 部署后刷新页面 404？</strong> A: 前端路由模式为 history 时，Nginx 必须配置 <code>try_files $uri $uri/ /index.html;</code>。</p><p><strong>Q: 数据库迁移怎么跑？</strong> A: 可以在 CI/CD 流程中运行，或在容器启动脚本中添加 <code>npx prisma migrate deploy</code>。</p><h2 id="_6-其他平台部署-paas-serverless" tabindex="-1">6. 其他平台部署 (PaaS/Serverless) <a class="header-anchor" href="#_6-其他平台部署-paas-serverless" aria-label="Permalink to &quot;6. 其他平台部署 (PaaS/Serverless)&quot;">​</a></h2><h3 id="vercel-推荐前端与文档" tabindex="-1">Vercel (推荐前端与文档) <a class="header-anchor" href="#vercel-推荐前端与文档" aria-label="Permalink to &quot;Vercel (推荐前端与文档)&quot;">​</a></h3><p>本项目支持直接使用 Vercel 进行部署，特别是前端和文档站点。</p><p><strong>1. 部署前端 (@nestbase/frontend)</strong></p><ul><li>在 Vercel 导入 Git 仓库。</li><li><strong>Root Directory</strong>: 设置为 <code>apps/frontend</code>。</li><li><strong>Framework Preset</strong>: 选择 <code>Vite</code>。</li><li><strong>Environment Variables</strong>: 添加 <code>.env</code> 中的变量 (如 <code>VITE_SERVICE_BASE_URL</code>)。</li><li>点击 Deploy。</li></ul><p><strong>2. 部署文档 (docs)</strong></p><ul><li>在 Vercel 导入 Git 仓库（新建项目）。</li><li><strong>Root Directory</strong>: 设置为 <code>docs</code>。</li><li><strong>Framework Preset</strong>: 选择 <code>VitePress</code> (或 <code>Other</code>，Build command: <code>pnpm docs:build</code>, Output: <code>.vitepress/dist</code>)。</li><li>点击 Deploy。</li></ul><p><strong>3. 部署后端 (backend)</strong></p><ul><li>虽然 Vercel 支持 NestJS，但建议使用 Serverless 模式适配。</li><li>自带的 <code>vercel.json</code> 配置了基础构建命令，但在 Monorepo 下建议为后端单独配置入口 <code>api/index.ts</code> 以适配 Vercel Functions。</li><li><em>注意</em>: 数据库连接池必须支持 Serverless (如 Supabase Transaction Pooler)，否则会耗尽连接。</li></ul><h3 id="github-pages-仅静态站点" tabindex="-1">GitHub Pages (仅静态站点) <a class="header-anchor" href="#github-pages-仅静态站点" aria-label="Permalink to &quot;GitHub Pages (仅静态站点)&quot;">​</a></h3><p>适用于 <strong>文档站点</strong> 或 <strong>纯静态前端</strong>。</p><ol><li>在项目根目录创建 <code>.github/workflows/deploy-docs.yml</code>:</li></ol><div class="language-yaml vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">yaml</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">name</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">Deploy Docs to Pages</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">on</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">  push</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">    branches</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: [</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">main</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">]</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">    paths</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: [</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;docs/**&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">]</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">jobs</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">  deploy</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">    runs-on</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">ubuntu-latest</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">    steps</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">      - </span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">uses</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">actions/checkout@v3</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">      - </span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">uses</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">pnpm/action-setup@v2</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">      - </span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">uses</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">actions/setup-node@v3</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">        with</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">          node-version</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">18</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">          cache</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;pnpm&#39;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">      - </span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">run</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">pnpm install --frozen-lockfile</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">      - </span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">run</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">pnpm docs:build</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">      - </span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">uses</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">peaceiris/actions-gh-pages@v3</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">        with</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">          github_token</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">\${{ secrets.GITHUB_TOKEN }}</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">          publish_dir</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">./docs/.vitepress/dist</span></span></code></pre></div><ol start="2"><li>提交代码后，GitHub Actions 会自动构建并发布到 <code>gh-pages</code> 分支。</li><li>在 GitHub 仓库 Settings -&gt; Pages 中选择 Source 为 <code>gh-pages</code> 分支。</li></ol>`,43)])])}const c=i(e,[["render",l]]);export{g as __pageData,c as default};
