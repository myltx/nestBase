import{_ as t,c as i,o as a,a0 as e}from"./chunks/framework.CHkYM5Ax.js";const k=JSON.parse('{"title":"权限管理系统 (RBAC) 使用手册","description":"","frontmatter":{},"headers":[],"relativePath":"guides/RBAC_MANUAL.md","filePath":"guides/RBAC_MANUAL.md","lastUpdated":1767087281000}'),l={name:"guides/RBAC_MANUAL.md"};function n(r,s,o,h,d,p){return a(),i("div",null,[...s[0]||(s[0]=[e(`<h1 id="权限管理系统-rbac-使用手册" tabindex="-1">权限管理系统 (RBAC) 使用手册 <a class="header-anchor" href="#权限管理系统-rbac-使用手册" aria-label="Permalink to &quot;权限管理系统 (RBAC) 使用手册&quot;">​</a></h1><p>本手册将指导您如何使用 NestBase 的权限管理系统，包括用户管理、角色管理、菜单分配与按钮权限控制。</p><h2 id="_1-概念说明" tabindex="-1">1. 概念说明 <a class="header-anchor" href="#_1-概念说明" aria-label="Permalink to &quot;1. 概念说明&quot;">​</a></h2><p>本系统采用标准的 <strong>RBAC (Role-Based Access Control)</strong> 模型，并结合菜单分离设计：</p><ul><li><strong>用户 (User)</strong>: 系统的登录账号。一个用户可以拥有多个角色。</li><li><strong>角色 (Role)</strong>: 权限的集合载体（如：管理员、编辑、访客）。</li><li><strong>菜单 (Menu)</strong>: 左侧导航栏的页面结构。可以控制角色是否<strong>可见</strong>某些菜单。</li><li><strong>权限 (Permission)</strong>: 具体的操作许可，分为三类： <ul><li><strong>MENU</strong>: 页面访问权限（通常与菜单可见性强关联）。</li><li><strong>BUTTON</strong>: 页面内的按钮操作权限（如：新增、删除）。</li><li><strong>API</strong>: 后端接口调用权限。</li></ul></li></ul><hr><h2 id="_2-操作流程" tabindex="-1">2. 操作流程 <a class="header-anchor" href="#_2-操作流程" aria-label="Permalink to &quot;2. 操作流程&quot;">​</a></h2><p>通常的配置流程如下：</p><ol><li><strong>创建菜单</strong>: 定义系统有哪些页面。</li><li><strong>定义权限</strong>: 为该页面下的功能（按钮/API）定义具体的权限点。</li><li><strong>创建角色</strong>: 建立职能角色（如“财务”、“运营”）。</li><li><strong>授权</strong>: <ul><li><strong>分配菜单</strong>: 决定该角色能看到哪些导航菜单。</li><li><strong>分配权限</strong>: 决定该角色能进行哪些具体操作。</li></ul></li><li><strong>分配角色</strong>: 将角色赋予具体的用户。</li></ol><hr><h2 id="_3-功能指南" tabindex="-1">3. 功能指南 <a class="header-anchor" href="#_3-功能指南" aria-label="Permalink to &quot;3. 功能指南&quot;">​</a></h2><h3 id="_3-1-菜单管理" tabindex="-1">3.1 菜单管理 <a class="header-anchor" href="#_3-1-菜单管理" aria-label="Permalink to &quot;3.1 菜单管理&quot;">​</a></h3><p>路径：<code>/manage/menu</code></p><ol><li><strong>新建菜单</strong>: <ul><li><strong>菜单名称</strong>: 显示在侧边栏的标题。</li><li><strong>路由名称 (RouteName)</strong>: 必须唯一，对应前端路由定义（如 <code>user_manage</code>）。</li><li><strong>路径 (Path)</strong>: 浏览器访问路径（如 <code>/manage/user</code>）。</li><li><strong>组件 (Component)</strong>: 前端组件路径（如 <code>layout.base</code> 或 <code>view.manage_user</code>）。</li></ul></li><li><strong>隐藏/显示</strong>: 可设置菜单是否在侧边栏显示（如详情页通常隐藏但路由存在）。</li></ol><h3 id="_3-2-权限管理" tabindex="-1">3.2 权限管理 <a class="header-anchor" href="#_3-2-权限管理" aria-label="Permalink to &quot;3.2 权限管理&quot;">​</a></h3><p>路径：<code>/manage/role</code> (通常在角色授权弹窗中操作，或通过 API 预置)</p><p>系统支持细粒度权限控制。示例：</p><table tabindex="0"><thead><tr><th style="text-align:left;">权限名称</th><th style="text-align:left;">权限编码 (Code)</th><th style="text-align:left;">类型</th><th style="text-align:left;">说明</th></tr></thead><tbody><tr><td style="text-align:left;">用户管理页</td><td style="text-align:left;"><code>user:view</code></td><td style="text-align:left;">MENU</td><td style="text-align:left;">是否能进入页面</td></tr><tr><td style="text-align:left;">新增用户</td><td style="text-align:left;"><code>user:create</code></td><td style="text-align:left;">BUTTON</td><td style="text-align:left;">是否显示“新增”按钮</td></tr><tr><td style="text-align:left;">删除用户</td><td style="text-align:left;"><code>user:delete</code></td><td style="text-align:left;">BUTTON</td><td style="text-align:left;">是否显示“删除”按钮</td></tr></tbody></table><blockquote><p><strong>提示</strong>: 按钮权限 (<code>BUTTON</code>) 必须关联一个父级菜单 (<code>MenuId</code>)，以便在授权界面按菜单分组展示。</p></blockquote><h3 id="_3-3-角色管理与授权" tabindex="-1">3.3 角色管理与授权 <a class="header-anchor" href="#_3-3-角色管理与授权" aria-label="Permalink to &quot;3.3 角色管理与授权&quot;">​</a></h3><p>路径：<code>/manage/role</code></p><ol><li><strong>新建角色</strong>: 设置角色名称和编码（如 <code>admin</code>, <code>editor</code>）。</li><li><strong>菜单授权 (分配可见性)</strong>: <ul><li>点击角色的 <strong>&quot;菜单权限&quot;</strong> 按钮（如有）。</li><li>勾选该角色可见的菜单树。</li><li><em>效果</em>: 用户登录后，左侧菜单栏仅显示被勾选的项。</li></ul></li><li><strong>功能授权 (分配操作权)</strong>: <ul><li>点击角色的 <strong>&quot;操作权限&quot;</strong> 按钮。</li><li>勾选具体的权限点（如 <code>新增用户</code>、<code>导出报表</code>）。</li><li><em>效果</em>: 前端根据权限显示/隐藏按钮，后端拦截无权请求。</li></ul></li></ol><h3 id="_3-4-用户管理" tabindex="-1">3.4 用户管理 <a class="header-anchor" href="#_3-4-用户管理" aria-label="Permalink to &quot;3.4 用户管理&quot;">​</a></h3><p>路径：<code>/manage/user</code></p><ol><li><strong>新建用户</strong>: 创建账号。</li><li><strong>分配角色</strong>: <ul><li>编辑用户，在 <strong>&quot;角色&quot;</strong> 选项中勾选一个或多个角色。</li><li>用户权限 = 所有拥有角色的权限之和（并集）。</li></ul></li></ol><hr><h2 id="_4-前端按钮权限使用" tabindex="-1">4. 前端按钮权限使用 <a class="header-anchor" href="#_4-前端按钮权限使用" aria-label="Permalink to &quot;4. 前端按钮权限使用&quot;">​</a></h2><p>在前端开发中，若需根据权限控制按钮显示，请使用 <code>v-permission</code> 指令或 <code>hasPermission</code> 函数。</p><h3 id="方式-a-指令-推荐" tabindex="-1">方式 A: 指令 (推荐) <a class="header-anchor" href="#方式-a-指令-推荐" aria-label="Permalink to &quot;方式 A: 指令 (推荐)&quot;">​</a></h3><div class="language-vue vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">vue</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">&lt;!-- 仅拥有 &#39;user:create&#39; 权限的用户可见 --&gt;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&lt;</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">NButton</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> v-permission</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;&#39;user:create&#39;&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;新增用户&lt;/</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">NButton</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">&lt;!-- 拥有 &#39;user:edit&#39; 或 &#39;user:delete&#39; 任一权限可见 --&gt;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&lt;</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">div</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> v-permission</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">[</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;user:edit&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;user:delete&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">]</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  操作区域</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&lt;/</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">div</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;</span></span></code></pre></div><h3 id="方式-b-函数调用" tabindex="-1">方式 B: 函数调用 <a class="header-anchor" href="#方式-b-函数调用" aria-label="Permalink to &quot;方式 B: 函数调用&quot;">​</a></h3><div class="language-typescript vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">typescript</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> { useAuthStore } </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">from</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &#39;@/store/modules/auth&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> authStore</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> useAuthStore</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">();</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">if</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (authStore.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">hasPermission</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;content:article:import&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)) {</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">  // 执行逻辑</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span></code></pre></div><hr><h2 id="_5-常见问题" tabindex="-1">5. 常见问题 <a class="header-anchor" href="#_5-常见问题" aria-label="Permalink to &quot;5. 常见问题&quot;">​</a></h2><p><strong>Q: 为什么我有菜单权限，但进页面提示 403？</strong> A: 请检查是否缺少对应的路由守卫验证权限（如 <code>MENU</code> 类型的权限点）。或者后端接口是否被 <code>@RequirePermissions</code> 拦截。</p><p><strong>Q: 新增了权限，为什么不生效？</strong> A: 权限变更通常需要<strong>用户重新登录</strong>或刷新页面（重新拉取权限配置）才能生效。</p><p><strong>Q: 超级管理员需要配置权限吗？</strong> A: 系统内置的 <code>SUPER_ADMIN</code> (admin) 通常拥有所有权限（跳过权限检查），具体取决于后端配置。但在界面展示上，建议仍为其分配完整菜单以保证导航显示正常。</p>`,37)])])}const c=t(l,[["render",n]]);export{k as __pageData,c as default};
