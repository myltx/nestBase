import{_ as e,c as l,o as a,a0 as o}from"./chunks/framework.CHkYM5Ax.js";const f=JSON.parse('{"title":"接口一致性分析报告","description":"","frontmatter":{},"headers":[],"relativePath":"reports/FRONTEND_BACKEND_ALIGNMENT.md","filePath":"reports/FRONTEND_BACKEND_ALIGNMENT.md","lastUpdated":1766998050000}'),r={name:"reports/FRONTEND_BACKEND_ALIGNMENT.md"};function d(s,t,i,n,c,h){return a(),l("div",null,[...t[0]||(t[0]=[o('<h1 id="接口一致性分析报告" tabindex="-1">接口一致性分析报告 <a class="header-anchor" href="#接口一致性分析报告" aria-label="Permalink to &quot;接口一致性分析报告&quot;">​</a></h1><h2 id="_1-概述" tabindex="-1">1. 概述 <a class="header-anchor" href="#_1-概述" aria-label="Permalink to &quot;1. 概述&quot;">​</a></h2><p>本报告对前端 (<code>apps/frontend</code>) 的 API 调用定义与后端 (<code>apps/backend</code>) 的实际接口实现进行了对比分析，旨在发现潜在的调用错误。</p><h2 id="_2-分析结果汇总" tabindex="-1">2. 分析结果汇总 <a class="header-anchor" href="#_2-分析结果汇总" aria-label="Permalink to &quot;2. 分析结果汇总&quot;">​</a></h2><table tabindex="0"><thead><tr><th style="text-align:left;">模块</th><th style="text-align:left;">状态</th><th style="text-align:left;">匹配数</th><th style="text-align:left;">不一致数</th><th style="text-align:left;">备注</th></tr></thead><tbody><tr><td style="text-align:left;"><strong>认证 (Auth)</strong></td><td style="text-align:left;">⚠️ 有风险</td><td style="text-align:left;">3</td><td style="text-align:left;">1</td><td style="text-align:left;">Refresh Token 接口路径不匹配</td></tr><tr><td style="text-align:left;"><strong>用户 (User)</strong></td><td style="text-align:left;">✅ 通过</td><td style="text-align:left;">3</td><td style="text-align:left;">0</td><td style="text-align:left;">核心 CRUD 接口一致</td></tr><tr><td style="text-align:left;"><strong>菜单/路由 (Menu)</strong></td><td style="text-align:left;">⚠️ 有风险</td><td style="text-align:left;">2</td><td style="text-align:left;">1</td><td style="text-align:left;">路由存在性检查接口风格不统一</td></tr></tbody></table><h2 id="_3-详细不一致项" tabindex="-1">3. 详细不一致项 <a class="header-anchor" href="#_3-详细不一致项" aria-label="Permalink to &quot;3. 详细不一致项&quot;">​</a></h2><h3 id="_3-1-认证模块-刷新-token" tabindex="-1">3.1 认证模块 - 刷新 Token <a class="header-anchor" href="#_3-1-认证模块-刷新-token" aria-label="Permalink to &quot;3.1 认证模块 - 刷新 Token&quot;">​</a></h3><ul><li><strong>前端定义</strong>: <code>POST /auth/refreshToken</code><ul><li>文件: <code>apps/frontend/src/service/api/auth.ts</code></li></ul></li><li><strong>后端实现</strong>: <code>POST /auth/refresh</code><ul><li>文件: <code>apps/backend/src/modules/auth/auth.controller.ts</code></li></ul></li><li><strong>建议</strong>: 修改前端调用路径为 <code>/refresh</code>。</li></ul><h3 id="_3-2-菜单模块-路由名称检查" tabindex="-1">3.2 菜单模块 - 路由名称检查 <a class="header-anchor" href="#_3-2-菜单模块-路由名称检查" aria-label="Permalink to &quot;3.2 菜单模块 - 路由名称检查&quot;">​</a></h3><ul><li><strong>前端定义</strong>: <code>GET /menus/route-exist/:routeName</code> (路径参数) <ul><li>文件: <code>apps/frontend/src/service/api/route.ts</code></li></ul></li><li><strong>后端实现</strong>: <code>GET /menus/validation/route-name?name=:name</code> (查询参数) <ul><li>文件: <code>apps/backend/src/modules/menus/menus.controller.ts</code></li></ul></li><li><strong>建议</strong>: 修改前端调用为 Query 参数形式，路径调整为 <code>/validation/route-name</code>。</li></ul><h2 id="_4-匹配项" tabindex="-1">4. 匹配项 <a class="header-anchor" href="#_4-匹配项" aria-label="Permalink to &quot;4. 匹配项&quot;">​</a></h2><p>以下关键接口已确认一致：</p><ul><li><code>POST /auth/login</code></li><li><code>GET /auth/profile</code></li><li><code>GET /auth/permissions</code></li><li><code>GET /users</code> (列表查询)</li><li><code>POST /users</code> (创建用户)</li><li><code>PATCH /users/:id</code> (更新用户)</li><li><code>GET /menus/constant-routes</code></li><li><code>GET /menus/user-routes</code></li></ul><h2 id="_5-结论" tabindex="-1">5. 结论 <a class="header-anchor" href="#_5-结论" aria-label="Permalink to &quot;5. 结论&quot;">​</a></h2><p>大部分核心业务接口是一致的，但存在 <strong>2 个关键路径不匹配</strong>，可能会导致：</p><ol><li>Token 过期后无法自动刷新，导致用户被登出。</li><li>创建菜单/路由时无法正确校验名称重复。</li></ol><p>建议立即修复前端代码以匹配后端实现。</p>',17)])])}const _=e(r,[["render",d]]);export{f as __pageData,_ as default};
