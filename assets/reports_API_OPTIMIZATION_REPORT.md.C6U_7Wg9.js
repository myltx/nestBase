import{_ as o,c as s,o as l,a0 as a}from"./chunks/framework.CHkYM5Ax.js";const _=JSON.parse('{"title":"API 简化与重构验证报告","description":"","frontmatter":{},"headers":[],"relativePath":"reports/API_OPTIMIZATION_REPORT.md","filePath":"reports/API_OPTIMIZATION_REPORT.md","lastUpdated":1766977345000}'),r={name:"reports/API_OPTIMIZATION_REPORT.md"};function t(i,e,d,n,c,u){return l(),s("div",null,[...e[0]||(e[0]=[a('<h1 id="api-简化与重构验证报告" tabindex="-1">API 简化与重构验证报告 <a class="header-anchor" href="#api-简化与重构验证报告" aria-label="Permalink to &quot;API 简化与重构验证报告&quot;">​</a></h1><h2 id="_1-改动概述" tabindex="-1">1. 改动概述 <a class="header-anchor" href="#_1-改动概述" aria-label="Permalink to &quot;1. 改动概述&quot;">​</a></h2><p>本次重构针对 Users、Roles、Menus 模块进行了接口精简和优化，旨在减少冗余接口，增强核心接口能力，提升前端调用的便捷性。</p><h2 id="_2-详细改动" tabindex="-1">2. 详细改动 <a class="header-anchor" href="#_2-详细改动" aria-label="Permalink to &quot;2. 详细改动&quot;">​</a></h2><h3 id="users-模块" tabindex="-1">Users 模块 <a class="header-anchor" href="#users-模块" aria-label="Permalink to &quot;Users 模块&quot;">​</a></h3><ul><li><strong>重置密码</strong>: 移除了独立的 <code>POST /users/:id/reset-password</code> 接口。 <ul><li><strong>新用法</strong>: 使用 <code>PATCH /users/:id</code>，在 Body 中传递 <code>password: &quot;新密码&quot;</code> 即可。</li></ul></li></ul><h3 id="roles-模块" tabindex="-1">Roles 模块 <a class="header-anchor" href="#roles-模块" aria-label="Permalink to &quot;Roles 模块&quot;">​</a></h3><ul><li><strong>创建/更新</strong>: <code>CreateRoleDto</code> 和 <code>UpdateRoleDto</code> 新增支持 <code>menuIds</code> 和 <code>permissionIds</code> 字段。 <ul><li><strong>新用法</strong>: 在创建或更新角色时，直接传入 ID 数组即可自动处理关联关系，不仅是一步到位，还支持原子性操作。</li></ul></li><li><strong>查询详情</strong>: <code>GET /roles/:id</code> 新增 <code>include</code> 查询参数。 <ul><li><strong>新用法</strong>: <code>GET /roles/123?include=menus,permissions</code>，返回结果将包含 <code>menuIds: [...]</code> 和 <code>permissionIds: [...]</code> 数组，便于前端回显。</li></ul></li><li><strong>移除接口</strong>: 删除了以下冗余接口，功能均已合并至标准 CRUD 中： <ul><li><code>assignMenus</code></li><li><code>assignPermissions</code></li><li><code>getRoleMenus</code></li><li><code>getRolePermissions</code></li><li><code>getRoleStats</code></li><li><code>getRoleUserCount</code>, <code>getRoleMenuCount</code>, <code>getRolePermissionCount</code></li></ul></li></ul><h3 id="menus-模块" tabindex="-1">Menus 模块 <a class="header-anchor" href="#menus-模块" aria-label="Permalink to &quot;Menus 模块&quot;">​</a></h3><ul><li><strong>路由校验</strong>: 重构了路由名称检查接口，使其更符合 Restful 规范。 <ul><li><strong>旧接口</strong>: <code>GET /menus/route-exist/:routeName</code></li><li><strong>新接口</strong>: <code>GET /menus/validation/route-name?name=HOME</code></li></ul></li></ul><h2 id="_3-验证结果" tabindex="-1">3. 验证结果 <a class="header-anchor" href="#_3-验证结果" aria-label="Permalink to &quot;3. 验证结果&quot;">​</a></h2><ul><li><strong>编译检查</strong>: 运行 <code>npm run build</code> 通过，无类型错误。</li><li><strong>依赖清理</strong>: 已清理所有不再使用的 DTO 文件和引用。</li></ul><h2 id="_4-下一步建议" tabindex="-1">4. 下一步建议 <a class="header-anchor" href="#_4-下一步建议" aria-label="Permalink to &quot;4. 下一步建议&quot;">​</a></h2><ul><li>建议前端同步更新 API 调用方式，特别是角色管理页面的“保存”逻辑，现在可以简化为单次请求。</li></ul>',14)])])}const m=o(r,[["render",t]]);export{_ as __pageData,m as default};
