import{_ as i,c as a,o as n,a0 as e}from"./chunks/framework.CHkYM5Ax.js";const c=JSON.parse('{"title":"Claude Code Context for NestBase","description":"","frontmatter":{},"headers":[],"relativePath":"project/setup/CLAUDE.md","filePath":"project/setup/CLAUDE.md","lastUpdated":1762852082000}'),t={name:"project/setup/CLAUDE.md"};function l(p,s,h,r,o,k){return n(),a("div",null,[...s[0]||(s[0]=[e(`<h1 id="claude-code-context-for-nestbase" tabindex="-1">Claude Code Context for NestBase <a class="header-anchor" href="#claude-code-context-for-nestbase" aria-label="Permalink to &quot;Claude Code Context for NestBase&quot;">â€‹</a></h1><p>This file contains essential information for Claude Code instances working in this repository.</p><hr><h2 id="ğŸ—ï¸-architecture-overview" tabindex="-1">ğŸ—ï¸ Architecture Overview <a class="header-anchor" href="#ğŸ—ï¸-architecture-overview" aria-label="Permalink to &quot;ğŸ—ï¸ Architecture Overview&quot;">â€‹</a></h2><h3 id="monorepo-structure" tabindex="-1">Monorepo Structure <a class="header-anchor" href="#monorepo-structure" aria-label="Permalink to &quot;Monorepo Structure&quot;">â€‹</a></h3><p>This is a <strong>pnpm workspace monorepo</strong> designed for frontend-backend collaboration:</p><div class="language- vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span>nestbase/</span></span>
<span class="line"><span>â”œâ”€â”€ apps/</span></span>
<span class="line"><span>â”‚   â”œâ”€â”€ backend/          # NestJS application</span></span>
<span class="line"><span>â”‚   â””â”€â”€ frontend/         # Frontend application (placeholder)</span></span>
<span class="line"><span>â”œâ”€â”€ packages/             # Shared packages (future)</span></span>
<span class="line"><span>â””â”€â”€ pnpm-workspace.yaml   # Workspace configuration</span></span></code></pre></div><p><strong>Key Point</strong>: Commands can be run from root using <code>pnpm --filter &lt;app&gt;</code> or directly in app directories.</p><h3 id="nestjs-backend-architecture" tabindex="-1">NestJS Backend Architecture <a class="header-anchor" href="#nestjs-backend-architecture" aria-label="Permalink to &quot;NestJS Backend Architecture&quot;">â€‹</a></h3><p><strong>Global Providers</strong> (configured in <code>app.module.ts</code>):</p><ol><li><strong>JwtAuthGuard</strong> (APP_GUARD) - Enforces authentication on all routes by default</li><li><strong>TransformInterceptor</strong> (APP_INTERCEPTOR) - Wraps all responses in unified format</li><li><strong>HttpExceptionFilter</strong> (APP_FILTER) - Centralizes error handling</li></ol><p>This means:</p><ul><li>All routes require JWT authentication unless decorated with <code>@Public()</code></li><li>All responses follow <code>{ success: boolean, data: any, message?: string }</code> format</li><li>All errors are caught and formatted consistently</li></ul><p><strong>Module Structure</strong>:</p><div class="language- vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span>src/</span></span>
<span class="line"><span>â”œâ”€â”€ common/                    # Shared utilities</span></span>
<span class="line"><span>â”‚   â”œâ”€â”€ decorators/           # @Public, @Roles, @CurrentUser</span></span>
<span class="line"><span>â”‚   â”œâ”€â”€ guards/               # JwtAuthGuard, RolesGuard</span></span>
<span class="line"><span>â”‚   â”œâ”€â”€ interceptors/         # TransformInterceptor</span></span>
<span class="line"><span>â”‚   â””â”€â”€ filters/              # HttpExceptionFilter</span></span>
<span class="line"><span>â”œâ”€â”€ modules/</span></span>
<span class="line"><span>â”‚   â”œâ”€â”€ prisma/               # Global database module</span></span>
<span class="line"><span>â”‚   â”œâ”€â”€ auth/                 # JWT authentication (register, login)</span></span>
<span class="line"><span>â”‚   â””â”€â”€ users/                # User CRUD with RBAC</span></span>
<span class="line"><span>â”œâ”€â”€ config/</span></span>
<span class="line"><span>â”‚   â””â”€â”€ swagger.config.ts     # Swagger/OpenAPI configuration</span></span>
<span class="line"><span>â””â”€â”€ main.ts                   # Bootstrap with global pipes</span></span></code></pre></div><p><strong>Path Aliases</strong> (configured in <code>tsconfig.json</code>):</p><ul><li><code>@common/*</code> â†’ <code>src/common/*</code></li><li><code>@modules/*</code> â†’ <code>src/modules/*</code></li><li><code>@config/*</code> â†’ <code>src/config/*</code></li></ul><hr><h2 id="ğŸ—„ï¸-database-configuration-critical" tabindex="-1">ğŸ—„ï¸ Database Configuration (Critical) <a class="header-anchor" href="#ğŸ—„ï¸-database-configuration-critical" aria-label="Permalink to &quot;ğŸ—„ï¸ Database Configuration (Critical)&quot;">â€‹</a></h2><h3 id="supabase-ipv4-network-requirements" tabindex="-1">Supabase IPv4 Network Requirements <a class="header-anchor" href="#supabase-ipv4-network-requirements" aria-label="Permalink to &quot;Supabase IPv4 Network Requirements&quot;">â€‹</a></h3><p><strong>IMPORTANT</strong>: This project uses Supabase with <strong>IPv4 network</strong> configuration, which requires specific setup:</p><ol><li><p><strong>Two Database URLs Required</strong>:</p><ul><li><code>DATABASE_URL</code> (port 6543) - Transaction mode for application runtime</li><li><code>DIRECT_URL</code> (port 5432) - Session mode for database migrations</li></ul></li><li><p><strong>Must Use Session Pooler</strong>:</p><div class="language-env vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">env</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span># âœ… Correct for IPv4</span></span>
<span class="line"><span>DATABASE_URL=&quot;postgresql://postgres.[ref]:[PASSWORD]@aws-x-region.pooler.supabase.com:6543/postgres?pgbouncer=true&amp;connection_limit=1&quot;</span></span>
<span class="line"><span>DIRECT_URL=&quot;postgresql://postgres.[ref]:[PASSWORD]@aws-x-region.pooler.supabase.com:5432/postgres&quot;</span></span>
<span class="line"><span></span></span>
<span class="line"><span># âŒ Wrong - Direct connection doesn&#39;t work on IPv4</span></span>
<span class="line"><span>DATABASE_URL=&quot;postgresql://...@db.xxxxx.supabase.co:5432/postgres&quot;</span></span></code></pre></div></li><li><p><strong>Password URL Encoding</strong>: Special characters in passwords MUST be URL encoded:</p><ul><li><code>@</code> â†’ <code>%40</code></li><li><code>#</code> â†’ <code>%23</code></li><li><code>$</code> â†’ <code>%24</code></li><li><code>%</code> â†’ <code>%25</code></li><li><code>&amp;</code> â†’ <code>%26</code></li><li><code>+</code> â†’ <code>%2B</code></li><li><code>/</code> â†’ <code>%2F</code></li><li><code>:</code> â†’ <code>%3A</code></li><li><code>=</code> â†’ <code>%3D</code></li><li><code>?</code> â†’ <code>%3F</code></li><li><code></code> (space) â†’ <code>%20</code></li></ul><p>Example: <code>ll940223..@@</code> â†’ <code>ll940223..%40%40</code></p></li><li><p><strong>Prisma Schema Configuration</strong>:</p><div class="language-prisma vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">prisma</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">datasource</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> db</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  provider  </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &quot;postgresql&quot;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  url       </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> env</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;DATABASE_URL&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)      </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// Runtime queries</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  directUrl </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> env</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;DIRECT_URL&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)        </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// Migrations</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span></code></pre></div></li></ol><p><strong>Reference</strong>: See <code>SUPABASE_SETUP.md</code> for complete configuration guide.</p><h3 id="user-model-fields" tabindex="-1">User Model Fields <a class="header-anchor" href="#user-model-fields" aria-label="Permalink to &quot;User Model Fields&quot;">â€‹</a></h3><p>The User model includes the following fields:</p><ul><li><strong>Required</strong>: <code>email</code>, <code>userName</code>, <code>password</code></li><li><strong>Optional Profile</strong>: <code>nickName</code> (æ˜µç§°), <code>firstName</code>, <code>lastName</code></li><li><strong>Optional Contact</strong>: <code>phone</code> (unique, æ‰‹æœºå·)</li><li><strong>Optional Demographics</strong>: <code>gender</code> (enum: MALE, FEMALE, OTHER)</li><li><strong>Optional</strong>: <code>avatar</code> (URL)</li><li><strong>System</strong>: <code>isActive</code> (boolean), <code>createdAt</code>, <code>updatedAt</code></li><li><strong>Relations</strong>: <code>userRoles</code> (many-to-many with Role)</li></ul><p>All camelCase fields (e.g., <code>userName</code>, <code>nickName</code>) are mapped to snake_case in the database (e.g., <code>username</code>, <code>nickname</code>) using Prisma&#39;s <code>@map()</code> directive.</p><hr><h2 id="ğŸš€-common-development-commands" tabindex="-1">ğŸš€ Common Development Commands <a class="header-anchor" href="#ğŸš€-common-development-commands" aria-label="Permalink to &quot;ğŸš€ Common Development Commands&quot;">â€‹</a></h2><h3 id="from-root-directory" tabindex="-1">From Root Directory <a class="header-anchor" href="#from-root-directory" aria-label="Permalink to &quot;From Root Directory&quot;">â€‹</a></h3><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># Install all dependencies</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">pnpm</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> install</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># Start backend in development mode (hot reload)</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">pnpm</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> dev</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># Build backend for production</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">pnpm</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> build</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># Start production build</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">pnpm</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> start</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># Generate Prisma Client</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">pnpm</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> prisma:generate</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># Push database schema (development)</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">pnpm</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> prisma:push</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># Run database migrations (production)</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">pnpm</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> prisma:migrate</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># Seed database with test data</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">pnpm</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> prisma:seed</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># Open Prisma Studio (database GUI)</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">pnpm</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> prisma:studio</span></span></code></pre></div><h3 id="from-apps-backend-directory" tabindex="-1">From apps/backend Directory <a class="header-anchor" href="#from-apps-backend-directory" aria-label="Permalink to &quot;From apps/backend Directory&quot;">â€‹</a></h3><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># Development server</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">pnpm</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> dev</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># Build</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">pnpm</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> build</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># Production server</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">pnpm</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> start:prod</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># Prisma commands</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">npx</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> prisma</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> generate</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">           # Generate Prisma Client</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">npx</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> prisma</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> db</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> push</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">            # Push schema to database (dev)</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">npx</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> prisma</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> migrate</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> dev</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">        # Create and apply migrations</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">npx</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> prisma</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> migrate</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> deploy</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">     # Deploy migrations (production)</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">npx</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> prisma</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> studio</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">             # Open database GUI</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">pnpm</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> seed</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">                     # Run seed script</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># TypeScript type checking</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">npx</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> tsc</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> --noEmit</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># Format code</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">pnpm</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> format</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># Lint code</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">pnpm</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> lint</span></span></code></pre></div><h3 id="quick-start-script" tabindex="-1">Quick Start Script <a class="header-anchor" href="#quick-start-script" aria-label="Permalink to &quot;Quick Start Script&quot;">â€‹</a></h3><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># Automated setup and startup</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">./start.sh</span></span></code></pre></div><p>This script automatically:</p><ul><li>Checks environment (Node.js, pnpm)</li><li>Installs dependencies if needed</li><li>Creates <code>.env</code> from <code>.env.example</code></li><li>Generates Prisma Client</li><li>Tests database connection</li><li>Finds available port</li><li>Starts application</li></ul><hr><h2 id="ğŸ”„-development-workflow" tabindex="-1">ğŸ”„ Development Workflow <a class="header-anchor" href="#ğŸ”„-development-workflow" aria-label="Permalink to &quot;ğŸ”„ Development Workflow&quot;">â€‹</a></h2><h3 id="initial-setup" tabindex="-1">Initial Setup <a class="header-anchor" href="#initial-setup" aria-label="Permalink to &quot;Initial Setup&quot;">â€‹</a></h3><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># 1. Install dependencies</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">pnpm</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> install</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># 2. Configure environment</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">cd</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> apps/backend</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">cp</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> .env.example</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> .env</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># Edit .env with Supabase credentials (remember URL encoding!)</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># 3. Generate Prisma Client</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">npx</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> prisma</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> generate</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># 4. Push schema to database</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">npx</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> prisma</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> db</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> push</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># 5. (Optional) Seed test data</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">cd</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> ../..</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">pnpm</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> prisma:seed</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># 6. Start development server</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">pnpm</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> dev</span></span></code></pre></div><h3 id="after-schema-changes" tabindex="-1">After Schema Changes <a class="header-anchor" href="#after-schema-changes" aria-label="Permalink to &quot;After Schema Changes&quot;">â€‹</a></h3><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># Development workflow</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">cd</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> apps/backend</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">npx</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> prisma</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> db</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> push</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">              # Push changes</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">npx</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> prisma</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> generate</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">             # Regenerate client</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">cd</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> ../..</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">pnpm</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> dev</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">                        # Restart server</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># Production workflow</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">cd</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> apps/backend</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">npx</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> prisma</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> migrate</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> dev</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> --name</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> description_of_change</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">npx</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> prisma</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> generate</span></span></code></pre></div><h3 id="database-reset" tabindex="-1">Database Reset <a class="header-anchor" href="#database-reset" aria-label="Permalink to &quot;Database Reset&quot;">â€‹</a></h3><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">cd</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> apps/backend</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">npx</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> prisma</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> migrate</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> reset</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">        # Resets DB, runs migrations, runs seed</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># Or manually:</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">npx</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> prisma</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> db</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> push</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> --force-reset</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">pnpm</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> seed</span></span></code></pre></div><hr><h2 id="ğŸ”-authentication-authorization" tabindex="-1">ğŸ” Authentication &amp; Authorization <a class="header-anchor" href="#ğŸ”-authentication-authorization" aria-label="Permalink to &quot;ğŸ” Authentication &amp; Authorization&quot;">â€‹</a></h2><h3 id="how-it-works" tabindex="-1">How It Works <a class="header-anchor" href="#how-it-works" aria-label="Permalink to &quot;How It Works&quot;">â€‹</a></h3><ol><li><strong>Global Authentication</strong>: <code>JwtAuthGuard</code> is applied globally via <code>APP_GUARD</code></li><li><strong>Public Routes</strong>: Use <code>@Public()</code> decorator to bypass authentication</li><li><strong>Role-Based Access</strong>: Use <code>@Roles(Role.ADMIN, Role.MODERATOR)</code> for RBAC</li><li><strong>Current User</strong>: Use <code>@CurrentUser()</code> decorator to get authenticated user</li></ol><h3 id="example-route" tabindex="-1">Example Route <a class="header-anchor" href="#example-route" aria-label="Permalink to &quot;Example Route&quot;">â€‹</a></h3><div class="language-typescript vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">typescript</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">@</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">Controller</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;users&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">export</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> class</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> UsersController</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">  // Public route (no authentication required)</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  @</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">Public</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">()</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  @</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">Get</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;public&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">  getPublicData</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">() { </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">...</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> }</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">  // Authenticated route (requires JWT)</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  @</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">Get</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;profile&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">  getProfile</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(@</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">CurrentUser</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">() </span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">user</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">:</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> User</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) { </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">...</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> }</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">  // Admin-only route</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  @</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">Roles</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(Role.</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">ADMIN</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  @</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">Delete</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;:id&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">  deleteUser</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(@</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">Param</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;id&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) </span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">id</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">:</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> string</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) { </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">...</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span></code></pre></div><h3 id="roles" tabindex="-1">Roles <a class="header-anchor" href="#roles" aria-label="Permalink to &quot;Roles&quot;">â€‹</a></h3><p>Defined in <code>prisma/schema.prisma</code>:</p><ul><li><code>USER</code> (default) - Standard user</li><li><code>MODERATOR</code> - Elevated permissions</li><li><code>ADMIN</code> - Full system access</li></ul><hr><h2 id="ğŸ“š-api-documentation" tabindex="-1">ğŸ“š API Documentation <a class="header-anchor" href="#ğŸ“š-api-documentation" aria-label="Permalink to &quot;ğŸ“š API Documentation&quot;">â€‹</a></h2><h3 id="swagger-ui" tabindex="-1">Swagger UI <a class="header-anchor" href="#swagger-ui" aria-label="Permalink to &quot;Swagger UI&quot;">â€‹</a></h3><p>Available at: <code>http://localhost:3000/api-docs</code></p><ul><li>All endpoints automatically documented via decorators</li><li>Online API testing interface</li><li>JWT authentication support (click &quot;Authorize&quot; button)</li></ul><h3 id="api-structure" tabindex="-1">API Structure <a class="header-anchor" href="#api-structure" aria-label="Permalink to &quot;API Structure&quot;">â€‹</a></h3><p>Base URL: <code>http://localhost:3000/api</code></p><p><strong>Authentication</strong> (<code>/api/auth</code>):</p><ul><li><code>POST /auth/register</code> - Register new user (public)</li><li><code>POST /auth/login</code> - Login (public)</li><li><code>GET /auth/profile</code> - Get current user info (authenticated)</li></ul><p><strong>Users</strong> (<code>/api/users</code>):</p><ul><li><code>POST /users</code> - Create user (admin only)</li><li><code>GET /users?current=1&amp;size=10</code> - List users with pagination &amp; search (authenticated)</li><li><code>GET /users/:id</code> - Get user by ID (authenticated)</li><li><code>PATCH /users/:id</code> - Update user (admin only)</li><li><code>DELETE /users/:id</code> - Delete user (admin only)</li></ul><p><strong>Projects</strong> (<code>/api/projects</code>):</p><ul><li><code>POST /projects</code> - Create project (admin only)</li><li><code>GET /projects?current=1&amp;size=10</code> - List projects with pagination &amp; filters (public)</li><li><code>GET /projects/featured</code> - Get all featured projects (public)</li><li><code>GET /projects/tech-stack</code> - Get all tech stack (public)</li><li><code>GET /projects/:id</code> - Get project by ID (public)</li><li><code>PATCH /projects/:id</code> - Update project (admin only)</li><li><code>PATCH /projects/:id/toggle-featured</code> - Toggle featured status (admin only)</li><li><code>DELETE /projects/:id</code> - Delete project (admin only)</li></ul><p><strong>System</strong> (<code>/api/swagger</code>):</p><ul><li><code>GET /swagger/json</code> - Get OpenAPI JSON document (public, no wrapping)</li><li><code>GET /swagger/stats</code> - Get API statistics (public, wrapped)</li></ul><hr><h2 id="ğŸ§ª-testing-workflow" tabindex="-1">ğŸ§ª Testing Workflow <a class="header-anchor" href="#ğŸ§ª-testing-workflow" aria-label="Permalink to &quot;ğŸ§ª Testing Workflow&quot;">â€‹</a></h2><h3 id="test-accounts" tabindex="-1">Test Accounts <a class="header-anchor" href="#test-accounts" aria-label="Permalink to &quot;Test Accounts&quot;">â€‹</a></h3><p>After running <code>pnpm prisma:seed</code>:</p><ul><li>Admin: <code>admin@example.com</code> / <code>admin123</code></li><li>User: <code>user@example.com</code> / <code>user123</code></li></ul><h3 id="manual-api-testing" tabindex="-1">Manual API Testing <a class="header-anchor" href="#manual-api-testing" aria-label="Permalink to &quot;Manual API Testing&quot;">â€‹</a></h3><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># 1. Login</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">curl</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -X</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> POST</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> http://localhost:3000/api/auth/login</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> \\</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">  -H</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &quot;Content-Type: application/json&quot;</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> \\</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">  -d</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &#39;{&quot;email&quot;:&quot;admin@example.com&quot;,&quot;password&quot;:&quot;admin123&quot;}&#39;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># 2. Use token from response</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">TOKEN</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;eyJhbGc...&quot;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># 3. Make authenticated request</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">curl</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> http://localhost:3000/api/users</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> \\</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">  -H</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &quot;Authorization: Bearer </span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">$TOKEN</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;</span></span></code></pre></div><p>Or use Swagger UI at <code>/api-docs</code> for easier testing.</p><hr><h2 id="âš ï¸-common-issues" tabindex="-1">âš ï¸ Common Issues <a class="header-anchor" href="#âš ï¸-common-issues" aria-label="Permalink to &quot;âš ï¸ Common Issues&quot;">â€‹</a></h2><h3 id="issue-1-prisma-client-not-generated" tabindex="-1">Issue 1: Prisma Client Not Generated <a class="header-anchor" href="#issue-1-prisma-client-not-generated" aria-label="Permalink to &quot;Issue 1: Prisma Client Not Generated&quot;">â€‹</a></h3><p><strong>Error</strong>: <code>Module &#39;@prisma/client&#39; has no exported member &#39;Role&#39;</code></p><p><strong>Solution</strong>:</p><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">cd</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> apps/backend</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">npx</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> prisma</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> generate</span></span></code></pre></div><h3 id="issue-2-database-connection-failed" tabindex="-1">Issue 2: Database Connection Failed <a class="header-anchor" href="#issue-2-database-connection-failed" aria-label="Permalink to &quot;Issue 2: Database Connection Failed&quot;">â€‹</a></h3><p><strong>Error</strong>: <code>Can&#39;t reach database server</code> or <code>Authentication failed</code></p><p><strong>Solutions</strong>:</p><ol><li>Verify <code>.env</code> file exists in <code>apps/backend/</code></li><li>Check password URL encoding (especially <code>@</code> â†’ <code>%40</code>)</li><li>Ensure using Session Pooler URLs (with <code>pooler.supabase.com</code>)</li><li>Test connection: <code>cd apps/backend &amp;&amp; npx prisma db push</code></li></ol><h3 id="issue-3-port-already-in-use" tabindex="-1">Issue 3: Port Already in Use <a class="header-anchor" href="#issue-3-port-already-in-use" aria-label="Permalink to &quot;Issue 3: Port Already in Use&quot;">â€‹</a></h3><p><strong>Error</strong>: <code>EADDRINUSE: address already in use</code></p><p><strong>Solution</strong>:</p><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># Find and kill process</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">lsof</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -ti:3000</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> |</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> xargs</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> kill</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -9</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># Or change port in .env</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">PORT</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">3001</span></span></code></pre></div><h3 id="issue-4-typescript-errors-after-schema-changes" tabindex="-1">Issue 4: TypeScript Errors After Schema Changes <a class="header-anchor" href="#issue-4-typescript-errors-after-schema-changes" aria-label="Permalink to &quot;Issue 4: TypeScript Errors After Schema Changes&quot;">â€‹</a></h3><p><strong>Solution</strong>:</p><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">cd</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> apps/backend</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">npx</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> prisma</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> generate</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">  # Regenerate Prisma Client</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">npx</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> tsc</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> --noEmit</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">     # Verify types</span></span></code></pre></div><hr><h2 id="ğŸ”§-configuration-files" tabindex="-1">ğŸ”§ Configuration Files <a class="header-anchor" href="#ğŸ”§-configuration-files" aria-label="Permalink to &quot;ğŸ”§ Configuration Files&quot;">â€‹</a></h2><h3 id="environment-variables" tabindex="-1">Environment Variables <a class="header-anchor" href="#environment-variables" aria-label="Permalink to &quot;Environment Variables&quot;">â€‹</a></h3><p>Located in <code>apps/backend/.env</code> (create from <code>.env.example</code>):</p><p><strong>Required Variables</strong>:</p><ul><li><code>DATABASE_URL</code> - Supabase connection (port 6543, Transaction mode)</li><li><code>DIRECT_URL</code> - Supabase connection (port 5432, Session mode)</li><li><code>JWT_SECRET</code> - Secret key for JWT signing (generate with <code>openssl rand -base64 32</code>)</li><li><code>JWT_EXPIRES_IN</code> - Token expiration (e.g., &quot;7d&quot;, &quot;24h&quot;)</li></ul><p><strong>Optional Variables</strong>:</p><ul><li><code>PORT</code> - Application port (default: 3000)</li><li><code>NODE_ENV</code> - Environment (development/production)</li><li><code>API_PREFIX</code> - API route prefix (default: &quot;api&quot;)</li><li><code>SUPABASE_URL</code> - Supabase project URL</li><li><code>SUPABASE_ANON_KEY</code> - Supabase anonymous key</li><li><code>SUPABASE_SERVICE_ROLE_KEY</code> - Supabase service role key</li></ul><h3 id="key-configuration-files" tabindex="-1">Key Configuration Files <a class="header-anchor" href="#key-configuration-files" aria-label="Permalink to &quot;Key Configuration Files&quot;">â€‹</a></h3><ul><li><code>pnpm-workspace.yaml</code> - Monorepo workspace definition</li><li><code>apps/backend/prisma/schema.prisma</code> - Database schema</li><li><code>apps/backend/tsconfig.json</code> - TypeScript config with path aliases</li><li><code>apps/backend/nest-cli.json</code> - NestJS CLI configuration</li><li><code>apps/backend/webpack.config.js</code> - Webpack config for hot reload</li></ul><hr><h2 id="ğŸ“¦-dependencies" tabindex="-1">ğŸ“¦ Dependencies <a class="header-anchor" href="#ğŸ“¦-dependencies" aria-label="Permalink to &quot;ğŸ“¦ Dependencies&quot;">â€‹</a></h2><h3 id="core-technologies" tabindex="-1">Core Technologies <a class="header-anchor" href="#core-technologies" aria-label="Permalink to &quot;Core Technologies&quot;">â€‹</a></h3><ul><li><strong>NestJS 10.4.x</strong> - Backend framework</li><li><strong>Prisma 5.22.x</strong> - ORM and database toolkit</li><li><strong>PostgreSQL</strong> - Database (via Supabase)</li><li><strong>TypeScript 5.x</strong> - Programming language</li><li><strong>pnpm 9.x</strong> - Package manager</li></ul><h3 id="key-libraries" tabindex="-1">Key Libraries <a class="header-anchor" href="#key-libraries" aria-label="Permalink to &quot;Key Libraries&quot;">â€‹</a></h3><ul><li><code>@nestjs/passport</code> + <code>passport-jwt</code> - JWT authentication</li><li><code>@nestjs/swagger</code> - API documentation</li><li><code>class-validator</code> + <code>class-transformer</code> - DTO validation</li><li><code>bcrypt</code> - Password hashing</li></ul><hr><h2 id="ğŸ¯-code-patterns" tabindex="-1">ğŸ¯ Code Patterns <a class="header-anchor" href="#ğŸ¯-code-patterns" aria-label="Permalink to &quot;ğŸ¯ Code Patterns&quot;">â€‹</a></h2><h3 id="data-transfer-objects-dtos" tabindex="-1">Data Transfer Objects (DTOs) <a class="header-anchor" href="#data-transfer-objects-dtos" aria-label="Permalink to &quot;Data Transfer Objects (DTOs)&quot;">â€‹</a></h3><p>Use <code>class-validator</code> decorators for automatic validation:</p><div class="language-typescript vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">typescript</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> { IsEmail, IsString, MinLength } </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">from</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &#39;class-validator&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">export</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> class</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> RegisterDto</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  @</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">IsEmail</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">()</span></span>
<span class="line"><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">  email</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">:</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> string</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  @</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">IsString</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">()</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  @</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">MinLength</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">6</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span>
<span class="line"><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">  password</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">:</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> string</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span></code></pre></div><h3 id="response-format" tabindex="-1">Response Format <a class="header-anchor" href="#response-format" aria-label="Permalink to &quot;Response Format&quot;">â€‹</a></h3><p>All responses automatically wrapped by <code>TransformInterceptor</code>:</p><div class="language-typescript vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">typescript</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// Success response</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">{</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">  &quot;success&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">true</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">  &quot;data&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: { </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">...</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// Error response</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">{</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">  &quot;success&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">false</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">  &quot;message&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;Error description&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">  &quot;statusCode&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">400</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">  &quot;timestamp&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;2025-10-15T...&quot;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span></code></pre></div><h3 id="prisma-service-pattern" tabindex="-1">Prisma Service Pattern <a class="header-anchor" href="#prisma-service-pattern" aria-label="Permalink to &quot;Prisma Service Pattern&quot;">â€‹</a></h3><div class="language-typescript vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">typescript</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">@</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">Injectable</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">()</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">export</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> class</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> UsersService</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">  constructor</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">private</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;"> prisma</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">:</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> PrismaService</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) {}</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">  async</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> findAll</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">() {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    return</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> this</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">.prisma.user.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">findMany</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">();</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span></code></pre></div><hr><h2 id="ğŸ“–-additional-documentation" tabindex="-1">ğŸ“– Additional Documentation <a class="header-anchor" href="#ğŸ“–-additional-documentation" aria-label="Permalink to &quot;ğŸ“– Additional Documentation&quot;">â€‹</a></h2><ul><li><code>README.md</code> - Main project documentation</li><li><code>QUICKSTART.md</code> - 4-step quick start guide</li><li><code>SUPABASE_SETUP.md</code> - Detailed Supabase configuration (400+ lines)</li><li><code>PROJECT_DELIVERY.md</code> - Project completion report</li><li><code>MONOREPO.md</code> - Monorepo architecture details</li></ul><hr><h2 id="ğŸš¨-important-notes" tabindex="-1">ğŸš¨ Important Notes <a class="header-anchor" href="#ğŸš¨-important-notes" aria-label="Permalink to &quot;ğŸš¨ Important Notes&quot;">â€‹</a></h2><ol><li><strong>Never commit <code>.env</code> files</strong> - Already in <code>.gitignore</code></li><li><strong>Always URL encode passwords</strong> - Especially <code>@</code> character</li><li><strong>Use <code>db push</code> in development</strong> - Faster than migrations</li><li><strong>Use <code>migrate</code> in production</strong> - Version-controlled schema changes</li><li><strong>Generate Prisma Client after schema changes</strong> - Types won&#39;t update otherwise</li><li><strong>Global guards apply to all routes</strong> - Use <code>@Public()</code> to opt-out</li><li><strong>Session Pooler required for IPv4</strong> - Direct connection won&#39;t work</li></ol><hr><h2 id="ğŸ”—-useful-commands-reference" tabindex="-1">ğŸ”— Useful Commands Reference <a class="header-anchor" href="#ğŸ”—-useful-commands-reference" aria-label="Permalink to &quot;ğŸ”— Useful Commands Reference&quot;">â€‹</a></h2><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># Quick health check</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">cd</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> apps/backend</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> &amp;&amp; </span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">npx</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> prisma</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> db</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> push</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> &amp;&amp; </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">cd</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> ../..</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> &amp;&amp; </span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">pnpm</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> dev</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># Full reset</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">cd</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> apps/backend</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> &amp;&amp; </span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">npx</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> prisma</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> migrate</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> reset</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> &amp;&amp; </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">cd</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> ../..</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> &amp;&amp; </span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">pnpm</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> dev</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># Production build</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">pnpm</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> build</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> &amp;&amp; </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">cd</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> apps/backend/dist</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> &amp;&amp; </span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">node</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> main.js</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># Database GUI</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">cd</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> apps/backend</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> &amp;&amp; </span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">npx</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> prisma</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> studio</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># TypeScript check without running</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">cd</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> apps/backend</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> &amp;&amp; </span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">npx</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> tsc</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> --noEmit</span></span></code></pre></div><hr><p><strong>Last Updated</strong>: 2025-10-15 <strong>Project Version</strong>: 1.0.0 <strong>NestJS Version</strong>: 10.4.20 <strong>Prisma Version</strong>: 5.22.0</p>`,131)])])}const g=i(t,[["render",l]]);export{c as __pageData,g as default};
